========================================
FORTSCHRITTS-TRACKING CODE
Für Globalisierungs-Lernpfad
========================================

ANLEITUNG:
----------
1. Fügen Sie diesen Code am ENDE jeder Modul-Seite ein (vor dem </body> Tag)
2. Ändern Sie die CURRENT_STEP Nummer für jede Seite:
   - globalisierte-welt.html       → CURRENT_STEP = 1
   - globalisierung-definition.html → CURRENT_STEP = 2
   - grafiken-globalisierung.html   → CURRENT_STEP = 3
   - gewinner-verlierer.html        → CURRENT_STEP = 4
   - migration.html                 → CURRENT_STEP = 5
   - quiz.html                      → CURRENT_STEP = 6

3. Fügen Sie diesen HTML-Code für den Button am Ende Ihres Inhalts ein
4. Fügen Sie das CSS in Ihren <style> Bereich ein


========================================
HTML FÜR DEN BUTTON (am Ende des Inhalts):
========================================

<div class="completion-section">
    <h3>Haben Sie diese Seite vollständig gelesen?</h3>
    <button class="completion-button" id="completeButton" disabled>
        Modul als abgeschlossen markieren
    </button>
    <div class="completion-message" id="completionMessage">
        ✓ Modul abgeschlossen! Sie können jetzt zum nächsten Thema weitergehen.
    </div>
</div>

<!-- Fortschritts-Indikator (schwebt rechts unten) -->
<div class="progress-indicator" id="progressIndicator">
    <div class="progress-circle" id="progressCircle">0%</div>
    <div class="progress-text">Scrollen Sie bis zum Ende</div>
</div>


========================================
CSS (in den <style> Bereich einfügen):
========================================

/* Fortschritts-Anzeige */
.progress-indicator {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: white;
    padding: 1rem;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 200px;
    text-align: center;
}

.progress-indicator.hidden {
    display: none;
}

.progress-circle {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: conic-gradient(#10b981 0% 0%, #e5e7eb 0% 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 0.5rem;
    font-size: 1.2rem;
    font-weight: bold;
    color: #1e3a8a;
}

.progress-text {
    font-size: 0.9rem;
    color: #666;
}

/* Abschluss-Button */
.completion-section {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-align: center;
    margin: 2rem 0;
}

.completion-section h3 {
    color: #1e3a8a;
    margin-bottom: 1rem;
}

.completion-button {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    padding: 1rem 2rem;
    border: none;
    border-radius: 25px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.completion-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(16, 185, 129, 0.3);
}

.completion-button:disabled {
    background: #9ca3af;
    cursor: not-allowed;
}

.completion-message {
    background: #d1fae5;
    color: #065f46;
    padding: 1rem;
    border-radius: 10px;
    margin-top: 1rem;
    display: none;
}

.completion-message.show {
    display: block;
}

@media (max-width: 768px) {
    .progress-indicator {
        bottom: 1rem;
        right: 1rem;
        min-width: 150px;
    }
}


========================================
JAVASCRIPT (vor dem </body> Tag einfügen):
========================================

<script>
    // WICHTIG: Ändern Sie diese Nummer für jede Seite!
    const CURRENT_STEP = 1; // ← HIER DIE SCHRITTNUMMER ÄNDERN!

    let hasScrolledToBottom = false;
    let hasCompletedModule = false;

    // Scroll-Fortschritt tracken
    function updateScrollProgress() {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollTop = window.scrollY;
        const scrollPercentage = (scrollTop / (documentHeight - windowHeight)) * 100;

        // Fortschritts-Kreis aktualisieren
        const progressCircle = document.getElementById('progressCircle');
        progressCircle.textContent = Math.round(scrollPercentage) + '%';
        progressCircle.parentElement.style.background = `conic-gradient(#10b981 0% ${scrollPercentage}%, #e5e7eb ${scrollPercentage}% 100%)`;

        // Wenn bis zum Ende gescrollt (95% oder mehr)
        if (scrollPercentage >= 95 && !hasScrolledToBottom) {
            hasScrolledToBottom = true;
            enableCompletionButton();
        }
    }

    // Button aktivieren
    function enableCompletionButton() {
        const button = document.getElementById('completeButton');
        button.disabled = false;
        button.textContent = '✓ Ich habe diese Seite gelesen';
        
        // Fortschritts-Indikator verstecken
        document.getElementById('progressIndicator').classList.add('hidden');
    }

    // Modul als abgeschlossen markieren
    function completeModule() {
        if (hasCompletedModule) return;

        hasCompletedModule = true;

        // Fortschritt speichern
        let completed = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
        if (!completed.includes(CURRENT_STEP)) {
            completed.push(CURRENT_STEP);
            localStorage.setItem('globalisierungProgress', JSON.stringify(completed));
        }

        // UI aktualisieren
        const button = document.getElementById('completeButton');
        button.textContent = '✓ Abgeschlossen';
        button.style.background = '#10b981';
        button.disabled = true;

        const message = document.getElementById('completionMessage');
        message.classList.add('show');
    }

    // Prüfen ob Modul bereits abgeschlossen wurde
    function checkIfAlreadyCompleted() {
        const completed = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
        if (completed.includes(CURRENT_STEP)) {
            hasCompletedModule = true;
            hasScrolledToBottom = true;
            
            const button = document.getElementById('completeButton');
            button.textContent = '✓ Bereits abgeschlossen';
            button.style.background = '#10b981';
            button.disabled = true;

            const message = document.getElementById('completionMessage');
            message.classList.add('show');

            document.getElementById('progressIndicator').classList.add('hidden');
        }
    }

    // Event Listeners
    window.addEventListener('scroll', updateScrollProgress);
    document.getElementById('completeButton').addEventListener('click', completeModule);

    // Initial check
    updateScrollProgress();
    checkIfAlreadyCompleted();
</script>


========================================
ZUSAMMENFASSUNG:
========================================

SO FUNKTIONIERT ES:
✓ Fortschritts-Kreis rechts unten zeigt Scroll-Fortschritt
✓ Button wird erst aktiv, wenn bis zum Ende (95%) gescrollt wurde
✓ Studierenden müssen auf "Ich habe diese Seite gelesen" klicken
✓ Fortschritt wird im Browser gespeichert
✓ Beim erneuten Besuch wird "Bereits abgeschlossen" angezeigt
✓ Fortschritt wird auf der index.html Lernpfad-Seite aktualisiert

WICHTIG:
- CURRENT_STEP für jede Seite anpassen!
- Alle 3 Teile (HTML, CSS, JavaScript) einfügen
