<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globalisierung Quiz - Lernspiel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .progress-container {
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 10px;
            text-align: center;
            color: #495057;
            font-weight: 600;
        }

        .quiz-content {
            padding: 40px;
        }

        .start-screen, .question-screen, .result-screen {
            display: none;
        }

        .start-screen.active, .question-screen.active, .result-screen.active {
            display: block;
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .start-screen p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
            font-size: 1.1em;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            cursor: not-allowed;
            transform: none;
        }

        .question-text {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 30px;
            line-height: 1.6;
            font-weight: 600;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            font-size: 1.1em;
            color: #333;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        .btn-container {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }

        .result-screen {
            text-align: center;
        }

        .result-screen h2 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 30px auto;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .score-text {
            font-size: 0.3em;
            margin-top: 10px;
        }

        .evaluation {
            font-size: 1.3em;
            color: #666;
            margin: 20px 0;
            line-height: 1.6;
        }

        .stats {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .emoji {
            font-size: 3em;
            margin: 20px 0;
        }

        .completion-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .completion-box h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .completion-box p {
            color: #666;
            margin-bottom: 15px;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .quiz-content {
                padding: 20px;
            }
            
            .question-text {
                font-size: 1.2em;
            }
            
            .option label {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåç Globalisierung Quiz</h1>
            <p>Teste dein Wissen √ºber die globalisierte Welt!</p>
        </div>

        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Frage 1 von 15</div>
        </div>

        <div class="quiz-content">
            <!-- Start Screen -->
            <div class="start-screen active" id="startScreen">
                <h2>Willkommen zum Globalisierung Quiz! üéØ</h2>
                <p>
                    Teste dein Wissen √ºber die verschiedenen Aspekte der Globalisierung:
                    von der globalisierten Welt im Alltag √ºber Definitionen und Dimensionen
                    bis hin zu Migration und Global Playern.
                </p>
                <p>
                    Das Quiz enth√§lt <strong>15 Fragen</strong> mit verschiedenen Schwierigkeitsgraden.
                    Einige Fragen haben mehrere richtige Antworten. Viel Erfolg!
                </p>
                <button class="btn" onclick="startQuiz()">Quiz starten</button>
                <br><br>
                <a href="index.html" style="color: #667eea; text-decoration: none; font-weight: 600;">‚Üê Zur√ºck zum Lernpfad</a>
            </div>

            <!-- Question Screen -->
            <div class="question-screen" id="questionScreen">
                <div class="question-text" id="questionText"></div>
                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
                <div class="btn-container">
                    <button class="btn" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                        Weiter
                    </button>
                    <button class="btn" id="checkBtn" onclick="checkAnswer()">
                        Antwort pr√ºfen
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div class="result-screen" id="resultScreen">
                <h2>Quiz abgeschlossen! üéâ</h2>
                <div class="emoji" id="resultEmoji">üèÜ</div>
                <div class="score-circle">
                    <div id="finalScore">0</div>
                    <div class="score-text">Punkte</div>
                </div>
                <div class="evaluation" id="evaluation"></div>
                <div class="stats">
                    <div class="stat-item">
                        <span>Richtige Antworten:</span>
                        <strong id="correctCount">0</strong>
                    </div>
                    <div class="stat-item">
                        <span>Falsche Antworten:</span>
                        <strong id="incorrectCount">0</strong>
                    </div>
                    <div class="stat-item">
                        <span>Erfolgsquote:</span>
                        <strong id="successRate">0%</strong>
                    </div>
                </div>
                
                <!-- Abschluss-Button -->
                <div class="completion-box">
                    <h3>Modul abschlie√üen</h3>
                    <p>Markiere dieses Quiz-Modul als abgeschlossen</p>
                    <button class="btn" id="completionBtn" onclick="markAsComplete()">
                        <span id="completionText">‚úì Modul als abgeschlossen markieren</span>
                    </button>
                </div>
                
                <button class="btn" onclick="restartQuiz()">Nochmal spielen</button>
                <br><br>
                <a href="index.html" style="color: #667eea; text-decoration: none; font-weight: 600;">‚Üê Zur√ºck zum Lernpfad</a>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Welche der folgenden Beispiele zeigen Globalisierung in unserem Alltag?",
                options: [
                    "Ich kaufe Schweizer K√§se im lokalen Gesch√§ft",
                    "Mein Smartphone wurde in China produziert",
                    "Ich schaue eine amerikanische Serie auf Netflix",
                    "Ich esse Bananen aus Ecuador zum Fr√ºhst√ºck"
                ],
                correct: [1, 2, 3],
                multiple: true,
                explanation: "B, C und D zeigen internationale Vernetzung durch Handel, Kulturkonsum und Warenstr√∂me."
            },
            {
                question: "Was bedeutet der Begriff 'Glokalisierung'?",
                options: [
                    "Die v√∂llige Vereinheitlichung der Welt",
                    "Die Verbindung von globalen und lokalen Aspekten",
                    "Der R√ºckzug auf nationale M√§rkte",
                    "Die Ablehnung von Globalisierung"
                ],
                correct: [1],
                multiple: false,
                explanation: "Glokalisierung beschreibt die Anpassung globaler Produkte/Ideen an lokale Gegebenheiten."
            },
            {
                question: "Globalisierung bezeichnet...",
                options: [
                    "Nur die wirtschaftliche Vernetzung zwischen L√§ndern",
                    "Die weltweite Vernetzung in verschiedenen Bereichen",
                    "Ausschlie√ülich den internationalen Handel",
                    "Nur die kulturelle Angleichung"
                ],
                correct: [1],
                multiple: false,
                explanation: "Globalisierung umfasst wirtschaftliche, politische, kulturelle und soziale Dimensionen."
            },
            {
                question: "Welche Dimensionen der Globalisierung gibt es?",
                options: [
                    "Wirtschaftliche Globalisierung",
                    "Kulturelle Globalisierung",
                    "Politische Globalisierung",
                    "√ñkologische Globalisierung"
                ],
                correct: [0, 1, 2, 3],
                multiple: true,
                explanation: "Alle Antworten sind richtig. Globalisierung hat viele verschiedene Dimensionen."
            },
            {
                question: "Was versteht man unter wirtschaftlicher Globalisierung?",
                options: [
                    "Die Verbreitung von Fast-Food-Ketten",
                    "Die zunehmende internationale Verflechtung von Volkswirtschaften",
                    "Nur den Export von Waren",
                    "Die Gr√ºndung der UNO"
                ],
                correct: [1],
                multiple: false,
                explanation: "Es geht um Handel, Finanzstr√∂me und wirtschaftliche Integration zwischen L√§ndern."
            },
            {
                question: "Welche Aussagen zu den Chancen der Globalisierung sind korrekt?",
                options: [
                    "Schnellerer Wissensaustausch und technologischer Fortschritt",
                    "Gr√∂√üere Produktauswahl f√ºr Konsumenten",
                    "Wirtschaftswachstum durch internationale Zusammenarbeit",
                    "Erh√∂hung aller Preise weltweit"
                ],
                correct: [0, 1, 2],
                multiple: true,
                explanation: "A, B und C sind Chancen. D ist falsch ‚Äì Globalisierung kann auch zu Preissenkungen f√ºhren."
            },
            {
                question: "Was sind typische Risiken der Globalisierung?",
                options: [
                    "Zunehmende soziale Ungleichheit",
                    "Umweltbelastung durch globale Warenstr√∂me",
                    "Verlust kultureller Vielfalt",
                    "Bessere Arbeitsbedingungen weltweit"
                ],
                correct: [0, 1, 2],
                multiple: true,
                explanation: "A, B und C sind Risiken. D ist ein m√∂glicher Vorteil, kein Risiko."
            },
            {
                question: "Migration ist...",
                options: [
                    "Nur die Flucht aus Kriegsgebieten",
                    "Die r√§umliche Bewegung von Menschen √ºber L√§ndergrenzen",
                    "Immer eine freiwillige Entscheidung",
                    "Ein neues Ph√§nomen des 21. Jahrhunderts"
                ],
                correct: [1],
                multiple: false,
                explanation: "Migration umfasst verschiedene Formen der Wanderung und ist ein historisches Ph√§nomen."
            },
            {
                question: "Welche Push-Faktoren (Absto√üungsfaktoren) k√∂nnen zu Migration f√ºhren?",
                options: [
                    "Krieg und Verfolgung",
                    "Arbeitslosigkeit und Armut",
                    "Naturkatastrophen",
                    "Hohe Lebensqualit√§t im Heimatland"
                ],
                correct: [0, 1, 2],
                multiple: true,
                explanation: "A, B und C sind Push-Faktoren. D w√§re ein Grund zu bleiben."
            },
            {
                question: "Was sind Pull-Faktoren (Anziehungsfaktoren) f√ºr Migration?",
                options: [
                    "Bessere Arbeitsm√∂glichkeiten",
                    "Politische Stabilit√§t",
                    "H√∂heres Bildungsangebot",
                    "Kriege im Zielland"
                ],
                correct: [0, 1, 2],
                multiple: true,
                explanation: "A, B und C sind Pull-Faktoren. D w√§re ein Push-Faktor."
            },
            {
                question: "Was ist ein 'Global Player'?",
                options: [
                    "Ein internationaler Sportverein",
                    "Ein weltweit t√§tiges Unternehmen",
                    "Ein Land mit gro√üer Wirtschaftskraft",
                    "Eine internationale Organisation"
                ],
                correct: [1],
                multiple: false,
                explanation: "Global Player sind transnationale Konzerne mit weltweiter Pr√§senz."
            },
            {
                question: "Welche Aussage zu Global Playern ist richtig?",
                options: [
                    "Sie produzieren nur in ihrem Heimatland",
                    "Sie nutzen internationale Produktionsketten",
                    "Sie haben keine Umweltverantwortung",
                    "Sie existieren nur im Technologiesektor"
                ],
                correct: [1],
                multiple: false,
                explanation: "Global Player nutzen weltweite Wertsch√∂pfungsketten zur Produktion."
            },
            {
                question: "Die Welt als 'globales Dorf' bedeutet...",
                options: [
                    "Alle Menschen leben in D√∂rfern",
                    "Die Welt ist durch Vernetzung n√§her zusammenger√ºckt",
                    "Es gibt keine St√§dte mehr",
                    "Nur l√§ndliche Regionen sind globalisiert"
                ],
                correct: [1],
                multiple: false,
                explanation: "Der Begriff beschreibt die zunehmende Vernetzung und N√§he trotz r√§umlicher Distanz."
            },
            {
                question: "Was bedeutet 'Vernetzung' im Kontext der Globalisierung?",
                options: [
                    "Nur digitale Internetverbindungen",
                    "Verbindungen auf wirtschaftlicher, politischer und kultureller Ebene",
                    "Ausschlie√ülich Transportwege",
                    "Nur soziale Medien"
                ],
                correct: [1],
                multiple: false,
                explanation: "Vernetzung umfasst alle Formen von Verbindungen zwischen Menschen, Staaten und Organisationen."
            },
            {
                question: "Welche Rolle spielt Technologie bei der Globalisierung?",
                options: [
                    "Keine besondere Rolle",
                    "Sie erm√∂glicht schnellere Kommunikation und Vernetzung",
                    "Sie verhindert Globalisierung",
                    "Sie ist nur in reichen L√§ndern relevant"
                ],
                correct: [1],
                multiple: false,
                explanation: "Technologie (Internet, Transport, Kommunikation) ist ein Haupttreiber der Globalisierung."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let isModuleCompleted = false;

        // Progress Tracking
        function initProgressTracking() {
            // Pr√ºfe beide Systeme
            const completedOld = localStorage.getItem('globalisierung_module5_completed');
            const progress = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
            
            // Wenn im neuen System (Index-Seite) als abgeschlossen markiert
            if (progress.includes(5)) {
                isModuleCompleted = true;
                updateCompletionButton(true);
                // Synchronisiere mit altem System
                if (completedOld !== 'true') {
                    localStorage.setItem('globalisierung_module5_completed', 'true');
                }
            }
            // Wenn im alten System als abgeschlossen markiert
            else if (completedOld === 'true') {
                isModuleCompleted = true;
                updateCompletionButton(true);
                // Synchronisiere mit neuem System
                if (!progress.includes(5)) {
                    progress.push(5);
                    localStorage.setItem('globalisierungProgress', JSON.stringify(progress));
                }
            }
        }

        function markAsComplete() {
            if (isModuleCompleted) return;

            // Altes System (f√ºr Kompatibilit√§t)
            localStorage.setItem('globalisierung_module5_completed', 'true');
            localStorage.setItem('globalisierung_module5_completedAt', new Date().toISOString());
            
            // Neues System (f√ºr Index-Seite)
            let progress = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
            if (!progress.includes(5)) {
                progress.push(5);
                localStorage.setItem('globalisierungProgress', JSON.stringify(progress));
            }
            
            isModuleCompleted = true;
            updateCompletionButton(true);

            alert('‚úì Modul 5 erfolgreich abgeschlossen!\n\nGl√ºckwunsch! Sie haben alle Module des Lernpfads abgeschlossen!');
        }

        function updateCompletionButton(completed) {
            const button = document.getElementById('completionBtn');
            const buttonText = document.getElementById('completionText');
            
            if (button && buttonText) {
                if (completed) {
                    button.classList.add('completed');
                    button.disabled = true;
                    buttonText.textContent = 'Modul abgeschlossen ‚úì';
                } else {
                    button.classList.remove('completed');
                    button.disabled = false;
                    buttonText.textContent = '‚úì Modul als abgeschlossen markieren';
                }
            }
        }

        function startQuiz() {
            document.getElementById('startScreen').classList.remove('active');
            document.getElementById('questionScreen').classList.add('active');
            document.getElementById('progressContainer').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                
                const inputType = question.multiple ? 'checkbox' : 'radio';
                optionDiv.innerHTML = `
                    <input type="${inputType}" id="option${index}" name="answer" value="${index}">
                    <label for="option${index}">${option}</label>
                `;
                
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'inline-block';
            
            updateProgress();
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Frage ${currentQuestion + 1} von ${questions.length}`;
        }

        function checkAnswer() {
            const question = questions[currentQuestion];
            const selectedOptions = Array.from(document.querySelectorAll('input[name="answer"]:checked')).map(input => parseInt(input.value));
            
            if (selectedOptions.length === 0) {
                alert('Bitte w√§hle mindestens eine Antwort aus!');
                return;
            }
            
            const isCorrect = arraysEqual(selectedOptions.sort(), question.correct.sort());
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.add('disabled');
                const input = option.querySelector('input');
                input.disabled = true;
                
                if (question.correct.includes(index)) {
                    option.classList.add('correct');
                } else if (selectedOptions.includes(index)) {
                    option.classList.add('incorrect');
                }
            });
            
            const feedback = document.getElementById('feedback');
            feedback.classList.add('show');
            
            if (isCorrect) {
                score += 10;
                correctAnswers++;
                feedback.classList.add('correct');
                feedback.textContent = '‚úì Richtig! ' + question.explanation;
            } else {
                incorrectAnswers++;
                feedback.classList.add('incorrect');
                feedback.textContent = '‚úó Leider falsch. ' + question.explanation;
            }
            
            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('questionScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            document.getElementById('progressContainer').style.display = 'none';
            
            const percentage = (correctAnswers / questions.length) * 100;
            
            document.getElementById('finalScore').textContent = score;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('incorrectCount').textContent = incorrectAnswers;
            document.getElementById('successRate').textContent = percentage.toFixed(0) + '%';
            
            let emoji, evaluation;
            
            if (percentage >= 87) {
                emoji = 'üèÜ';
                evaluation = 'Ausgezeichnet! Du hast das Thema Globalisierung sehr gut verstanden und bist ein echter Experte!';
            } else if (percentage >= 67) {
                emoji = 'üéØ';
                evaluation = 'Gut gemacht! Du kennst die wichtigsten Aspekte der Globalisierung.';
            } else if (percentage >= 47) {
                emoji = 'üìö';
                evaluation = 'Befriedigend. Es lohnt sich, einige Themen nochmal zu vertiefen.';
            } else {
                emoji = 'üí™';
                evaluation = 'Nicht aufgeben! Arbeite die Lerninhalte nochmal durch und versuche es erneut.';
            }
            
            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('evaluation').textContent = evaluation;
            
            // Initialisiere Progress Tracking nach Anzeige der Ergebnisse
            initProgressTracking();
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('startScreen').classList.add('active');
        }

        function arraysEqual(a, b) {
            return a.length === b.length && a.every((val, index) => val === b[index]);
        }
    </script>
</body>
</html>
