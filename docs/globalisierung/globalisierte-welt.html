<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weltreise von Alltagsgegenst√§nden</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            background: linear-gradient(135deg, #1e3a8a 0%, #0ea5e9 100%);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cdefs%3E%3CradialGradient id='globe' cx='50%25' cy='40%25'%3E%3Cstop offset='0%25' style='stop-color:%234a90e2;stop-opacity:1' /%3E%3Cstop offset='70%25' style='stop-color:%232c5aa0;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%231a3a6b;stop-opacity:1' /%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='400' cy='400' r='300' fill='url(%23globe)' opacity='0.3'/%3E%3Cg fill='%2334d399' opacity='0.4'%3E%3Cpath d='M 400 300 Q 420 310 425 340 Q 430 370 420 400 Q 410 430 400 450 Q 390 430 385 400 Q 380 360 390 330 Q 395 310 400 300 Z'/%3E%3Cpath d='M 380 260 Q 390 255 400 260 Q 410 265 415 275 Q 410 285 400 285 Q 390 285 385 280 Q 378 272 380 260 Z'/%3E%3Cpath d='M 430 250 Q 470 260 500 280 Q 520 300 530 330 Q 535 360 525 390 Q 515 410 500 420 Q 480 410 465 395 Q 450 375 445 350 Q 440 320 445 290 Q 440 270 430 250 Z'/%3E%3Cpath d='M 280 250 Q 300 240 320 245 Q 340 255 350 275 Q 355 300 345 325 Q 335 345 320 355 Q 305 350 295 335 Q 285 315 280 290 Q 275 270 280 250 Z'/%3E%3Cpath d='M 320 370 Q 330 365 340 375 Q 345 395 340 420 Q 335 450 325 475 Q 315 485 310 475 Q 305 455 308 430 Q 312 400 315 385 Q 318 375 320 370 Z'/%3E%3Cpath d='M 520 480 Q 540 475 555 485 Q 565 500 560 515 Q 550 525 535 522 Q 520 515 515 500 Q 513 487 520 480 Z'/%3E%3C/g%3E%3Cg stroke='%23ffffff' stroke-width='1' fill='none' opacity='0.15'%3E%3Cellipse cx='400' cy='400' rx='300' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='240'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='180'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='120'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='60'/%3E%3Cellipse cx='400' cy='400' rx='240' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='180' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='120' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='60' ry='300'/%3E%3Cline x1='400' y1='100' x2='400' y2='700'/%3E%3Cline x1='100' y1='400' x2='700' y2='400'/%3E%3C/g%3E%3C/svg%3E");
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: -1;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2.5rem;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            color: #666;
        }

        .back-link {
            display: inline-block;
            margin: 1rem 0 0 0;
            color: #0ea5e9;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        main {
            flex: 1;
            max-width: 1000px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 1rem 2rem 1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .card h2 {
            color: #1e3a8a;
            margin-bottom: 1rem;
        }

        .card h3 {
            color: #1e3a8a;
            margin-bottom: 0.75rem;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .product-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .product-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-info {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .progress-bar-container {
            background: #e5e7eb;
            height: 10px;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: bold;
            color: #1e3a8a;
        }

        .question-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .question-card h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .hint-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .hint-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .hint-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .option-button {
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid #e5e7eb;
            padding: 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .option-button:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.2);
        }

        .option-flag {
            margin-bottom: 0.5rem;
            line-height: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 60px;
        }

        .flag-img {
            height: 48px;
            width: auto;
            max-width: 72px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .flag-icon {
            font-size: 3rem;
        }

        .option-name {
            font-weight: bold;
            color: #1e3a8a;
            font-size: 1.1rem;
        }

        .action-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 2rem;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-icon {
            font-size: 5rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            color: #1e3a8a;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .fact-box {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .fact-box p {
            color: #1e3a8a;
            line-height: 1.6;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .info-item {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .tips-box {
            background: #dcfce7;
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .tips-box h4 {
            color: #059669;
            margin-bottom: 0.75rem;
        }

        .tips-box ul {
            list-style: none;
            padding: 0;
        }

        .tips-box li {
            color: #166534;
            padding: 0.5rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .celebration {
            animation: pulse 1s ease-in-out;
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }

        .expandable-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .expandable-header {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 1.5rem 2rem;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .expandable-header:hover {
            background: linear-gradient(135deg, #d97706, #b45309);
        }

        .expandable-header .arrow {
            font-size: 1.5rem;
            transition: transform 0.3s;
            display: inline-block;
        }

        .expandable-header.open .arrow {
            transform: rotate(180deg);
        }

        #fazit-arrow {
            transition: transform 0.3s;
            display: inline-block;
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }

        .expandable-content.open {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }

        .expandable-inner {
            padding: 2rem;
        }

        .task-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #f59e0b;
        }

        .task-box h3 {
            color: #92400e;
            margin-bottom: 0.75rem;
        }

        .task-box p {
            color: #78350f;
            line-height: 1.6;
        }

        .task-box ul {
            color: #78350f;
            line-height: 1.8;
            margin-left: 1.5rem;
        }

        .task-box ul li {
            margin-bottom: 0.5rem;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .completion-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .completion-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1.5rem 3rem;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }

        .completion-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .completion-button.completed {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            cursor: default;
        }

        .completion-button.completed:hover {
            transform: none;
        }



        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .expandable-header {
                font-size: 1rem;
                padding: 1rem 1.5rem;
            }

            .expandable-inner {
                padding: 1rem;
            }

            .completion-button {
                font-size: 1.1rem;
                padding: 1.25rem 2rem;
            }
        }

        .journey-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .journey-step {
            background: rgba(255, 255, 255, 0.95);
            padding: 1.25rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .journey-icon {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
        }

        .journey-icon .flag-img {
            height: 40px;
        }

        .journey-icon .flag-icon {
            font-size: 2.5rem;
        }

        .journey-content {
            flex: 1;
        }

        .journey-location {
            font-weight: bold;
            color: #1e3a8a;
            font-size: 1.1rem;
        }

        .journey-description {
            color: #666;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <div id="app"></div>



    <script>
        // Mapping von L√§ndernamen zu ISO-Codes f√ºr Flaggen-URLs
        const countryFlags = {
            'Indien': 'in',
            'Schweiz': 'ch',
            'Deutschland': 'de',
            'Kanada': 'ca',
            'China': 'cn',
            'Italien': 'it',
            'USA': 'us',
            'Brasilien': 'br',
            'Bangladesh': 'bd',
            'Finnland': 'fi',
            'Mexiko': 'mx',
            'Japan': 'jp',
            'Kongo': 'cd',
            'Gr√∂nland': 'gl',
            'Island': 'is',
            'Neuseeland': 'nz',
            'Taiwan': 'tw',
            'Portugal': 'pt',
            '√Ñgypten': 'eg',
            'Peru': 'pe',
            'S√ºdkorea': 'kr',
            'Polen': 'pl',
            'T√ºrkei': 'tr',
            'Chile': 'cl',
            'S√ºdafrika': 'za',
            'Spanien': 'es',
            'Norwegen': 'no',
            'Australien': 'au',
            'Argentinien': 'ar',
            'Schweden': 'se',
            'Marokko': 'ma',
            'Malaysia': 'my',
            'Frankreich': 'fr',
            'Russland': 'ru',
            'Belgien': 'be',
            '√ñsterreich': 'at',
            'D√§nemark': 'dk',
            'Irland': 'ie',
            'Vietnam': 'vn',
            'Indonesien': 'id',
            'Niederlande': 'nl',
            'Ungarn': 'hu',
            'Nigeria': 'ng',
            'Thailand': 'th',
            'Elfenbeink√ºste': 'ci',
            'Kolumbien': 'co',
            '√Ñthiopien': 'et',
            'Tschechien': 'cz',
            'Griechenland': 'gr',
            // Spezielle Eintr√§ge f√ºr nicht-L√§nder
            'Containerschiff': 'ship',
            'Flugzeug': 'plane',
            'Zug': 'train',
            'LKW direkt': 'truck',
            'LKW': 'truck',
            'Auto': 'car',
            'E-Scooter fahren': 'scooter',
            'Gesch√§ft in der Schweiz': 'ch',
            'Laden in der Schweiz': 'ch',
            'Schweizer Elektronikladen': 'ch',
            'Direkt in China': 'cn',
            'Online aus Indien': 'in',
            'Im Hafen': 'port',
            'In Taiwan': 'tw',
            'Am Flughafen': 'plane',
            'Auf dem Schiff': 'ship',
            'Zug durch Asien': 'train',
            'Ozean': 'ship',
            'Atlantik': 'ship',
            'Luft': 'plane'
        };

        // Funktion zum Generieren des Flaggen-HTML
        function getFlagHTML(country, size = 'normal') {
            const code = countryFlags[country];
            
            // F√ºr Transport-Icons
            const transportIcons = {
                'ship': 'üö¢',
                'plane': '‚úàÔ∏è',
                'train': 'üöÇ',
                'truck': 'üöõ',
                'car': 'üöó',
                'scooter': 'üõ¥',
                'port': '‚öì'
            };
            
            if (transportIcons[code]) {
                return `<span class="flag-icon">${transportIcons[code]}</span>`;
            }
            
            if (code && code.length === 2) {
                // Verwende flagcdn.com f√ºr echte L√§nderflaggen
                return `<img src="https://flagcdn.com/h40/${code}.png" 
                            srcset="https://flagcdn.com/h60/${code}.png 1.5x, https://flagcdn.com/h80/${code}.png 2x" 
                            class="flag-img" 
                            alt="${country}" 
                            loading="lazy">`;
            }
            
            // Fallback: zeige nur den L√§ndernamen
            return `<span class="flag-icon">üåç</span>`;
        }

        // Hilfsfunktion um Array zu mischen
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        let gameState = {
            currentProduct: null,
            currentStep: 0,
            score: 0,
            lives: 3,
            correctInRound: 0,
            gameMode: 'menu',
            showHint: false,
            usedHint: false,
            shuffledOptions: []
        };

        const products = {
            tshirt: {
                name: 'T-Shirt',
                icon: 'üëï',
                color: '#3B82F6',
                gradient: 'from-blue-500 to-blue-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'üå± Schritt 1: Rohstoffe',
                        intro: 'Um ein T-Shirt herzustellen, braucht es Baumwolle, die von der Baumwollpflanze stammt.',
                        question: 'Wo wird die Baumwolle f√ºr dein T-Shirt haupts√§chlich angebaut?',
                        options: [
                            { country: 'Indien', correct: true },
                            { country: 'Schweiz', correct: false },
                            { country: 'Deutschland', correct: false },
                            { country: 'Kanada', correct: false }
                        ],
                        correctAnswer: 'Indien',
                        fact: 'Indien ist der zweitgr√∂√üte Baumwollproduzent der Welt! Ein einziges T-Shirt ben√∂tigt etwa 2.700 Liter Wasser beim Anbau.',
                        hint: 'Dieses Land in S√ºdasien ist bekannt f√ºr seine gro√üe Textilproduktion.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üßµ Schritt 2: Spinnen & Weben',
                        intro: 'Die geerntete Baumwolle muss nun zu Garn gesponnen und dann zu Stoff gewebt werden.',
                        question: 'In welchem Land wird die Baumwolle zu Garn gesponnen und zu Stoff gewebt?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Italien', correct: false },
                            { country: 'USA', correct: false },
                            { country: 'Brasilien', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China ist die weltgr√∂√üte Textilindustrie und verarbeitet Baumwolle aus der ganzen Welt zu Stoffen.',
                        hint: 'Die ‚ÄûWerkbank der Welt" in Ostasien.'
                    },
                    {
                        step: 3,
                        stepTitle: 'üé® Schritt 3: F√§rben & Veredeln',
                        intro: 'Der rohe, wei√üe Stoff wird nun gef√§rbt und chemisch behandelt, um ihm Farbe und besondere Eigenschaften zu geben.',
                        question: 'Wo wird der Stoff oft gef√§rbt und chemisch behandelt?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Norwegen', correct: false },
                            { country: 'Australien', correct: false },
                            { country: 'Argentinien', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'Beim F√§rben werden oft gro√üe Mengen Wasser und Chemikalien verwendet. Dies kann die Umwelt stark belasten.',
                        hint: 'Oft im gleichen Land wie das Weben - effizient f√ºr kurze Transportwege.'
                    },
                    {
                        step: 4,
                        stepTitle: '‚úÇÔ∏è Schritt 4: N√§hen',
                        intro: 'Der gef√§rbte Stoff wird nun zugeschnitten und zu fertigen T-Shirts zusammengen√§ht.',
                        question: 'In welchem Land werden viele T-Shirts zusammengen√§ht?',
                        options: [
                            { country: 'Bangladesh', correct: true },
                            { country: 'Finnland', correct: false },
                            { country: 'Mexiko', correct: false },
                            { country: 'Japan', correct: false }
                        ],
                        correctAnswer: 'Bangladesh',
                        fact: 'Bangladesh ist eines der gr√∂√üten Textilproduktionsl√§nder. Tausende Menschen arbeiten in N√§hereien ‚Äì oft unter schwierigen Bedingungen.',
                        hint: 'Ein s√ºdasiatisches Land, Nachbar von Indien, bekannt f√ºr g√ºnstige Textilproduktion.'
                    },
                    {
                        step: 5,
                        stepTitle: 'üö¢ Schritt 5: Transport',
                        intro: 'Das fertige T-Shirt muss nun von Asien in die Schweiz transportiert werden.',
                        question: 'Wie kommt dein T-Shirt in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', correct: true },
                            { country: 'Flugzeug', correct: false },
                            { country: 'Zug', correct: false },
                            { country: 'LKW direkt', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Dein T-Shirt reist etwa 15.000 km auf einem Containerschiff √ºber den Ozean. Die Reise dauert 4-6 Wochen!',
                        hint: 'Der g√ºnstigste und umweltfreundlichste Weg f√ºr lange Distanzen.'
                    },
                    {
                        step: 6,
                        stepTitle: 'üè™ Schritt 6: Verkauf',
                        intro: 'Nach der langen Reise ist das T-Shirt endlich in Europa angekommen.',
                        question: 'Wo kaufst du dein T-Shirt schlie√ülich?',
                        options: [
                            { country: 'Gesch√§ft in der Schweiz', correct: true },
                            { country: 'Direkt in China', correct: false },
                            { country: 'Online aus Indien', correct: false },
                            { country: 'Im Hafen', correct: false }
                        ],
                        correctAnswer: 'Gesch√§ft in der Schweiz',
                        fact: 'Nach seiner Weltreise von √ºber 15.000 km landet dein T-Shirt endlich im Schweizer Laden. Es wurde von √ºber 20 verschiedenen H√§nden ber√ºhrt!',
                        hint: 'Am Ende der Reise ‚Äì dort wo du lebst!'
                    }
                ],
                totalDistance: '~15.000 km',
                funFact: 'Ein durchschnittliches T-Shirt reist weiter als die meisten Menschen in einem Jahr!',
                journey: [
                    { step: 1, location: 'Indien', description: 'Baumwollanbau' },
                    { step: 2, location: 'China', description: 'Spinnen & Weben' },
                    { step: 3, location: 'China', description: 'F√§rben' },
                    { step: 4, location: 'Bangladesh', description: 'N√§hen' },
                    { step: 5, location: 'Ozean', description: 'Transport' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            },
            smartphone: {
                name: 'Smartphone',
                icon: 'üì±',
                color: '#8B5CF6',
                gradient: 'from-purple-500 to-purple-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '‚õèÔ∏è Schritt 1: Rohstoffabbau',
                        intro: 'Ein Smartphone besteht aus √ºber 60 verschiedenen Materialien. F√ºr die Elektronik werden seltene Erden und Coltan ben√∂tigt.',
                        question: 'Wo werden seltene Erden und Coltan f√ºr dein Smartphone abgebaut?',
                        options: [
                            { country: 'Kongo', correct: true },
                            { country: 'Gr√∂nland', correct: false },
                            { country: 'Island', correct: false },
                            { country: 'Neuseeland', correct: false }
                        ],
                        correctAnswer: 'Kongo',
                        fact: 'Der Kongo besitzt 80% der weltweiten Coltan-Reserven! √úber 60 verschiedene Materialien werden f√ºr ein Smartphone ben√∂tigt.',
                        hint: 'Ein zentralafrikanisches Land mit reichen Bodensch√§tzen.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üíæ Schritt 2: Chip-Produktion',
                        intro: 'Das Herzst√ºck eines Smartphones sind die Mikrochips. Diese winzigen, aber extrem komplexen Bauteile werden in High-Tech-Fabriken hergestellt.',
                        question: 'Wo werden die komplexen Mikrochips hergestellt?',
                        options: [
                            { country: 'Taiwan', correct: true },
                            { country: 'Portugal', correct: false },
                            { country: '√Ñgypten', correct: false },
                            { country: 'Peru', correct: false }
                        ],
                        correctAnswer: 'Taiwan',
                        fact: 'Taiwan produziert √ºber 60% der weltweiten Mikrochips! Eine einzige Chip-Fabrik kostet mehrere Milliarden Dollar zu bauen.',
                        hint: 'Eine Insel vor der K√ºste Chinas, Weltmarktf√ºhrer in der Halbleiterproduktion.'
                    },
                    {
                        step: 3,
                        stepTitle: 'üì± Schritt 3: Display-Herstellung',
                        intro: 'Das Display ist eines der teuersten und aufwendigsten Teile eines Smartphones. Es wird in spezialisierten Fabriken gefertigt.',
                        question: 'Wo werden die hochaufl√∂senden Displays produziert?',
                        options: [
                            { country: 'S√ºdkorea', correct: true },
                            { country: 'Polen', correct: false },
                            { country: 'T√ºrkei', correct: false },
                            { country: 'Chile', correct: false }
                        ],
                        correctAnswer: 'S√ºdkorea',
                        fact: 'S√ºdkorea und Japan sind f√ºhrend in der Display-Technologie. Ein modernes Display hat mehr Pixel als das menschliche Auge unterscheiden kann!',
                        hint: 'Bekannt f√ºr Technologie-Giganten wie Samsung und LG.'
                    },
                    {
                        step: 4,
                        stepTitle: 'üîß Schritt 4: Zusammenbau',
                        intro: 'Alle Einzelteile - Chips, Display, Kamera, Batterie und hunderte weitere Komponenten - werden nun zusammengesetzt.',
                        question: 'Wo werden die Smartphones zusammengesetzt?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Finnland', correct: false },
                            { country: 'Spanien', correct: false },
                            { country: 'S√ºdafrika', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'In riesigen Fabriken in China werden t√§glich Millionen Smartphones zusammengebaut. Die Arbeiter m√ºssen tausende kleine Teile pr√§zise verbauen.',
                        hint: 'Die gr√∂√üte Elektronikmontage-Industrie der Welt.'
                    },
                    {
                        step: 5,
                        stepTitle: 'üì¶ Schritt 5: Verpackung & Versand',
                        intro: 'Das fertige Smartphone wird verpackt und f√ºr den weltweiten Versand vorbereitet.',
                        question: 'Wie kommt dein Smartphone von China in die Schweiz?',
                        options: [
                            { country: 'Flugzeug', correct: true },
                            { country: 'Containerschiff', correct: false },
                            { country: 'Zug', correct: false },
                            { country: 'Auto', correct: false }
                        ],
                        correctAnswer: 'Flugzeug',
                        fact: 'Wegen des hohen Werts und der Nachfrage werden Smartphones meist per Flugzeug transportiert - schnell, aber nicht sehr umweltfreundlich!',
                        hint: 'Der schnellste, aber teuerste und umweltsch√§dlichste Transportweg.'
                    },
                    {
                        step: 6,
                        stepTitle: 'üè™ Schritt 6: Verkauf',
                        intro: 'Nach seiner Reise um die halbe Welt ist dein Smartphone endlich verf√ºgbar.',
                        question: 'Wo kaufst du dein Smartphone schlie√ülich?',
                        options: [
                            { country: 'Schweizer Elektronikladen', correct: true },
                            { country: 'Direkt in China', correct: false },
                            { country: 'In Taiwan', correct: false },
                            { country: 'Am Flughafen', correct: false }
                        ],
                        correctAnswer: 'Schweizer Elektronikladen',
                        fact: 'Dein Smartphone hat eine Reise von √ºber 10.000 km hinter sich und wurde in mindestens 5 verschiedenen L√§ndern verarbeitet!',
                        hint: 'Am Ende der Reise ‚Äì in deinem Heimatland!'
                    }
                ],
                totalDistance: '~10.000 km',
                funFact: 'Ein Smartphone enth√§lt mehr Rechenleistung als alle Computer, die die Apollo 11 zum Mond gebracht haben!',
                journey: [
                    { step: 1, location: 'Kongo', description: 'Rohstoffabbau' },
                    { step: 2, location: 'Taiwan', description: 'Chip-Produktion' },
                    { step: 3, location: 'S√ºdkorea', description: 'Display' },
                    { step: 4, location: 'China', description: 'Zusammenbau' },
                    { step: 5, location: 'Luft', description: 'Transport' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            },
            sneaker: {
                name: 'Sneaker',
                icon: 'üëü',
                color: '#EF4444',
                gradient: 'from-red-500 to-red-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'üß™ Schritt 1: Gummi & Kunststoffe',
                        intro: 'Moderne Sneaker bestehen haupts√§chlich aus synthetischen Materialien und Gummi.',
                        question: 'Wo werden die Kunststoffe und Gummisohlen f√ºr Sneaker hergestellt?',
                        options: [
                            { country: 'Malaysia', correct: true },
                            { country: 'Schweiz', correct: false },
                            { country: 'Frankreich', correct: false },
                            { country: 'Russland', correct: false }
                        ],
                        correctAnswer: 'Malaysia',
                        fact: 'Malaysia ist einer der gr√∂√üten Gummiproduzenten der Welt. Ein Paar Sneaker enth√§lt √ºber 65 verschiedene Teile!',
                        hint: 'Ein s√ºdostasiatisches Land, bekannt f√ºr Gummi- und Kunststoffproduktion.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üßµ Schritt 2: Obermaterial',
                        intro: 'Das Obermaterial (Upper) ist der sichtbare Teil des Schuhs und besteht aus verschiedenen Textilien und Kunstleder.',
                        question: 'Wo wird das Obermaterial f√ºr Sneaker produziert?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Schweden', correct: false },
                            { country: 'Kanada', correct: false },
                            { country: 'Belgien', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert √ºber 60% aller Schuhmaterialien weltweit. Moderne Sneaker verwenden oft recycelte Plastikflaschen!',
                        hint: 'Die weltgr√∂√üte Textil- und Schuhindustrie.'
                    },
                    {
                        step: 3,
                        stepTitle: '‚öôÔ∏è Schritt 3: D√§mpfung & Technologie',
                        intro: 'Moderne Sneaker haben High-Tech-D√§mpfungssysteme f√ºr Komfort und Performance.',
                        question: 'Wo werden die speziellen D√§mpfungselemente entwickelt und hergestellt?',
                        options: [
                            { country: 'Vietnam', correct: true },
                            { country: '√ñsterreich', correct: false },
                            { country: 'D√§nemark', correct: false },
                            { country: 'Irland', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Vietnam hat sich auf High-Tech-Schuhkomponenten spezialisiert. Die D√§mpfung in Sneakern kann bis zu 80% der Aufprallenergie absorbieren!',
                        hint: 'Ein s√ºdostasiatisches Land, das sich auf Schuh-Technologie spezialisiert hat.'
                    },
                    {
                        step: 4,
                        stepTitle: '‚úÇÔ∏è Schritt 4: Schneiden & Vorbereitung',
                        intro: 'Alle Materialien werden pr√§zise zugeschnitten und f√ºr die Montage vorbereitet.',
                        question: 'Wo werden die Materialien zugeschnitten und vorbereitet?',
                        options: [
                            { country: 'Indonesien', correct: true },
                            { country: 'Niederlande', correct: false },
                            { country: 'Griechenland', correct: false },
                            { country: 'Tschechien', correct: false }
                        ],
                        correctAnswer: 'Indonesien',
                        fact: 'Indonesien ist einer der gr√∂√üten Schuhproduzenten. Jeder Sneaker besteht aus durchschnittlich 65 Einzelteilen, die pr√§zise geschnitten werden m√ºssen!',
                        hint: 'Ein Inselstaat in S√ºdostasien mit gro√üer Schuhindustrie.'
                    },
                    {
                        step: 5,
                        stepTitle: 'üè≠ Schritt 5: Zusammenbau',
                        intro: 'Nun werden alle Teile des Sneakers zusammengef√ºgt - ein komplexer Prozess mit vielen Handarbeitsschritten.',
                        question: 'Wo werden die Sneaker zusammengebaut?',
                        options: [
                            { country: 'Vietnam', correct: true },
                            { country: 'Italien', correct: false },
                            { country: 'USA', correct: false },
                            { country: 'Ungarn', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Vietnam produziert √ºber 1 Milliarde Paar Schuhe pro Jahr! Ein Arbeiter ben√∂tigt etwa 3 Stunden, um einen High-End-Sneaker zusammenzubauen.',
                        hint: 'Einer der gr√∂√üten Schuh-Exporteure der Welt in S√ºdostasien.'
                    },
                    {
                        step: 6,
                        stepTitle: 'üö¢ Schritt 6: Versand & Verkauf',
                        intro: 'Die fertigen Sneaker werden verpackt und in die Schweiz verschifft.',
                        question: 'Wie kommen deine Sneaker in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', correct: true },
                            { country: 'Flugzeug', correct: false },
                            { country: 'Zug durch Asien', correct: false },
                            { country: 'LKW', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Deine Sneaker reisen etwa 12.000 km auf dem Seeweg! Ein Container kann bis zu 10.000 Paar Schuhe transportieren.',
                        hint: 'Der g√ºnstigste Transportweg f√ºr gro√üe Mengen √ºber weite Distanzen.'
                    }
                ],
                totalDistance: '~12.000 km',
                funFact: 'Ein Paar Sneaker hat mehr L√§nder besucht als die meisten Menschen! Und die Produktion verursacht etwa 14 kg CO2.',
                journey: [
                    { step: 1, location: 'Malaysia', description: 'Gummi & Kunststoff' },
                    { step: 2, location: 'China', description: 'Obermaterial' },
                    { step: 3, location: 'Vietnam', description: 'D√§mpfung' },
                    { step: 4, location: 'Indonesien', description: 'Zuschnitt' },
                    { step: 5, location: 'Vietnam', description: 'Zusammenbau' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            },
            escooter: {
                name: 'E-Scooter',
                icon: 'üõ¥',
                color: '#F59E0B',
                gradient: 'from-amber-500 to-amber-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '‚ö° Schritt 1: Lithium-Abbau',
                        intro: 'F√ºr die Batterie eines E-Scooters wird Lithium ben√∂tigt, ein wertvolles Metall f√ºr Akkus.',
                        question: 'Wo wird das Lithium f√ºr die E-Scooter-Batterie haupts√§chlich abgebaut?',
                        options: [
                            { country: 'Chile', correct: true },
                            { country: 'Schweiz', correct: false },
                            { country: 'Nigeria', correct: false },
                            { country: 'Thailand', correct: false }
                        ],
                        correctAnswer: 'Chile',
                        fact: 'Chile besitzt die gr√∂√üten Lithium-Reserven der Welt! Die riesigen Salzseen in der Atacama-W√ºste liefern √ºber 25% des weltweiten Lithiums.',
                        hint: 'Ein s√ºdamerikanisches Land mit gro√üen Salzw√ºsten und Lithium-Vorkommen.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üîã Schritt 2: Batterie-Produktion',
                        intro: 'Aus dem Lithium werden nun leistungsstarke Lithium-Ionen-Akkus hergestellt.',
                        question: 'Wo werden die meisten E-Scooter-Batterien produziert?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Schweden', correct: false },
                            { country: 'Indien', correct: false },
                            { country: 'Brasilien', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert √ºber 70% aller Lithium-Ionen-Batterien weltweit! Eine E-Scooter-Batterie kann bis zu 1000 Mal aufgeladen werden.',
                        hint: 'Das Land, das die meisten Elektrofahrzeuge und Batterien produziert.'
                    },
                    {
                        step: 3,
                        stepTitle: '‚öôÔ∏è Schritt 3: Motor & Elektronik',
                        intro: 'Der Elektromotor und die Steuerungselektronik sind das Herzst√ºck des E-Scooters.',
                        question: 'Wo werden die Elektromotoren f√ºr E-Scooter hergestellt?',
                        options: [
                            { country: 'Japan', correct: true },
                            { country: 'Marokko', correct: false },
                            { country: 'Argentinien', correct: false },
                            { country: 'Norwegen', correct: false }
                        ],
                        correctAnswer: 'Japan',
                        fact: 'Japan ist f√ºhrend in der Elektromotor-Technologie! Die Motoren sind so effizient, dass √ºber 90% der Energie in Bewegung umgewandelt wird.',
                        hint: 'Ein ostasiatisches Land, bekannt f√ºr Hightech-Elektronik und Pr√§zisionstechnik.'
                    },
                    {
                        step: 4,
                        stepTitle: 'üî© Schritt 4: Rahmen & Teile',
                        intro: 'Der Aluminiumrahmen und alle mechanischen Teile wie Bremsen, R√§der und Lenkung werden gefertigt.',
                        question: 'Wo werden Rahmen und mechanische Teile produziert?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Australien', correct: false },
                            { country: 'Mexiko', correct: false },
                            { country: 'Finnland', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China ist Weltmarktf√ºhrer in der Aluminium-Verarbeitung! Ein E-Scooter besteht aus √ºber 200 Einzelteilen.',
                        hint: 'Das Land mit der gr√∂√üten Aluminium- und Metallverarbeitungsindustrie.'
                    },
                    {
                        step: 5,
                        stepTitle: 'üè≠ Schritt 5: Zusammenbau',
                        intro: 'Alle Komponenten - Batterie, Motor, Rahmen und Elektronik - werden nun zum fertigen E-Scooter montiert.',
                        question: 'Wo werden E-Scooter zusammengebaut?',
                        options: [
                            { country: 'China', correct: true },
                            { country: 'Deutschland', correct: false },
                            { country: 'USA', correct: false },
                            { country: 'S√ºdkorea', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert √ºber 90% aller E-Scooter weltweit! In den Fabriken werden t√§glich zehntausende E-Scooter montiert.',
                        hint: 'Das gleiche Land, wo die meisten Komponenten hergestellt werden - effizient f√ºr die Logistik.'
                    },
                    {
                        step: 6,
                        stepTitle: 'üö¢ Schritt 6: Transport & Verkauf',
                        intro: 'Die fertigen E-Scooter werden verpackt und in die ganze Welt verschickt.',
                        question: 'Wie kommt dein E-Scooter in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', correct: true },
                            { country: 'Flugzeug', correct: false },
                            { country: 'Zug', correct: false },
                            { country: 'E-Scooter fahren', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Dein E-Scooter reist etwa 18.000 km auf dem Seeweg! Die Reise dauert 5-6 Wochen bis nach Europa.',
                        hint: 'Der umweltfreundlichste Weg f√ºr schwere G√ºter √ºber lange Distanzen.'
                    }
                ],
                totalDistance: '~18.000 km',
                funFact: 'Die Batterie eines E-Scooters ist das teuerste Teil - sie kostet etwa 30-40% des gesamten Preises!',
                journey: [
                    { step: 1, location: 'Chile', description: 'Lithium-Abbau' },
                    { step: 2, location: 'China', description: 'Batterie-Produktion' },
                    { step: 3, location: 'Japan', description: 'Motor & Elektronik' },
                    { step: 4, location: 'China', description: 'Rahmen & Teile' },
                    { step: 5, location: 'China', description: 'Zusammenbau' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            },
            chocolate: {
                name: 'Schokolade',
                icon: 'üç´',
                color: '#92400E',
                gradient: 'from-amber-800 to-amber-900',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'üå¥ Schritt 1: Kakao-Anbau',
                        intro: 'Schokolade beginnt mit Kakaobohnen, die auf Kakaob√§umen in tropischen Regionen wachsen.',
                        question: 'Wo wird der Kakao f√ºr deine Schokolade haupts√§chlich angebaut?',
                        options: [
                            { country: 'Elfenbeink√ºste', correct: true },
                            { country: 'Schweiz', correct: false },
                            { country: 'Island', correct: false },
                            { country: 'Polen', correct: false }
                        ],
                        correctAnswer: 'Elfenbeink√ºste',
                        fact: 'Die Elfenbeink√ºste produziert √ºber 40% des weltweiten Kakaos! Ein Kakaobaum braucht 3-5 Jahre, bis er die ersten Fr√ºchte tr√§gt.',
                        hint: 'Ein westafrikanisches Land am Atlantik, weltgr√∂√üter Kakao-Produzent.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üè≠ Schritt 2: Kakao-Verarbeitung',
                        intro: 'Die Kakaobohnen werden fermentiert, getrocknet und dann zu Kakaomasse und Kakaobutter verarbeitet.',
                        question: 'Wo wird der Kakao zu Kakaomasse verarbeitet?',
                        options: [
                            { country: 'Niederlande', correct: true },
                            { country: 'Kanada', correct: false },
                            { country: 'Russland', correct: false },
                            { country: 'Australien', correct: false }
                        ],
                        correctAnswer: 'Niederlande',
                        fact: 'Die Niederlande sind der weltgr√∂√üte Kakao-Verarbeiter! In Amsterdam befindet sich der gr√∂√üte Kakaohafen Europas.',
                        hint: 'Ein europ√§isches Land mit gro√üem Hafen, bekannt f√ºr internationalen Handel.'
                    },
                    {
                        step: 3,
                        stepTitle: 'üåæ Schritt 3: Zucker',
                        intro: 'F√ºr Schokolade braucht es Zucker, der aus Zuckerrohr oder Zuckerr√ºben gewonnen wird.',
                        question: 'Woher kommt der Zucker f√ºr deine Schokolade?',
                        options: [
                            { country: 'Brasilien', correct: true },
                            { country: 'Norwegen', correct: false },
                            { country: 'S√ºdafrika', correct: false },
                            { country: 'Japan', correct: false }
                        ],
                        correctAnswer: 'Brasilien',
                        fact: 'Brasilien ist der weltgr√∂√üte Zuckerproduzent! F√ºr 1 kg Schokolade werden etwa 500g Zucker ben√∂tigt.',
                        hint: 'Das gr√∂√üte Land S√ºdamerikas, bekannt f√ºr Zuckerrohr-Plantagen.'
                    },
                    {
                        step: 4,
                        stepTitle: 'ü•õ Schritt 4: Milchpulver',
                        intro: 'F√ºr Milchschokolade wird Milchpulver ben√∂tigt, das aus frischer Milch hergestellt wird.',
                        question: 'Woher kommt das Milchpulver f√ºr Schweizer Milchschokolade?',
                        options: [
                            { country: 'Neuseeland', correct: true },
                            { country: '√Ñgypten', correct: false },
                            { country: 'Schweden', correct: false },
                            { country: 'T√ºrkei', correct: false }
                        ],
                        correctAnswer: 'Neuseeland',
                        fact: 'Neuseeland ist weltweit f√ºhrend in der Milchpulver-Produktion! Das Land hat mehr K√ºhe als Menschen.',
                        hint: 'Ein Inselstaat im Pazifik, bekannt f√ºr Milchwirtschaft und gr√ºne Weiden.'
                    },
                    {
                        step: 5,
                        stepTitle: 'üèîÔ∏è Schritt 5: Schokoladen-Herstellung',
                        intro: 'Nun werden alle Zutaten gemischt, conchiert und zu feiner Schokolade verarbeitet.',
                        question: 'Wo wird aus allen Zutaten die fertige Schokolade hergestellt?',
                        options: [
                            { country: 'Schweiz', correct: true },
                            { country: 'China', correct: false },
                            { country: 'Indien', correct: false },
                            { country: 'Peru', correct: false }
                        ],
                        correctAnswer: 'Schweiz',
                        fact: 'Die Schweiz ist weltber√ºhmt f√ºr ihre Schokolade! Der Conchier-Prozess wurde hier erfunden und dauert bis zu 72 Stunden.',
                        hint: 'Das Land, wo du lebst - weltber√ºhmt f√ºr Schokolade!'
                    },
                    {
                        step: 6,
                        stepTitle: 'üè™ Schritt 6: Verpackung & Verkauf',
                        intro: 'Die fertige Schokolade wird verpackt und ist bereit f√ºr den Verkauf.',
                        question: 'Wo kaufst du deine Schweizer Schokolade?',
                        options: [
                            { country: 'Laden in der Schweiz', correct: true },
                            { country: 'Elfenbeink√ºste', correct: false },
                            { country: 'Niederlande', correct: false },
                            { country: 'Brasilien', correct: false }
                        ],
                        correctAnswer: 'Laden in der Schweiz',
                        fact: 'Schweizer essen durchschnittlich 11 kg Schokolade pro Jahr - Weltrekord! Deine Schokolade hat Zutaten von 4 Kontinenten.',
                        hint: 'Am Ende der Reise - direkt dort, wo die Schokolade produziert wurde!'
                    }
                ],
                totalDistance: '~25.000 km',
                funFact: 'Obwohl die Schokolade in der Schweiz hergestellt wird, reisen ihre Zutaten √ºber 25.000 km - mehr als die halbe Welt!',
                journey: [
                    { step: 1, location: 'Elfenbeink√ºste', description: 'Kakao-Anbau' },
                    { step: 2, location: 'Niederlande', description: 'Kakao-Verarbeitung' },
                    { step: 3, location: 'Brasilien', description: 'Zucker' },
                    { step: 4, location: 'Neuseeland', description: 'Milchpulver' },
                    { step: 5, location: 'Schweiz', description: 'Schokoladen-Produktion' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            },
            coffee: {
                name: 'Kaffee',
                icon: '‚òï',
                color: '#78350F',
                gradient: 'from-amber-900 to-stone-900',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'üå± Schritt 1: Kaffeeanbau',
                        intro: 'Kaffee w√§chst auf Kaffeeb√§umen in tropischen und subtropischen Gebieten. Die Kaffeepflanze braucht ein warmes Klima und viel Regen.',
                        question: 'Wo werden die Kaffeebohnen f√ºr deinen Kaffee haupts√§chlich angebaut?',
                        options: [
                            { country: 'Kolumbien', correct: true },
                            { country: 'Schweiz', correct: false },
                            { country: 'Norwegen', correct: false },
                            { country: 'Kanada', correct: false }
                        ],
                        correctAnswer: 'Kolumbien',
                        fact: 'Kolumbien ist der drittgr√∂√üte Kaffeeproduzent der Welt! Eine Kaffeepflanze braucht 3-4 Jahre, bis sie das erste Mal Fr√ºchte tr√§gt.',
                        hint: 'Ein s√ºdamerikanisches Land, weltbekannt f√ºr hochwertigen Arabica-Kaffee.'
                    },
                    {
                        step: 2,
                        stepTitle: 'üèûÔ∏è Schritt 2: Ernte & Aufbereitung',
                        intro: 'Die reifen Kaffeekirschen werden von Hand gepfl√ºckt. Dann werden die Bohnen aus den Fr√ºchten gel√∂st, fermentiert und getrocknet.',
                        question: 'Wo werden die Kaffeebohnen aufbereitet und getrocknet?',
                        options: [
                            { country: 'Kolumbien', correct: true },
                            { country: 'Deutschland', correct: false },
                            { country: 'China', correct: false },
                            { country: 'Frankreich', correct: false }
                        ],
                        correctAnswer: 'Kolumbien',
                        fact: 'Die Aufbereitung findet direkt nach der Ernte statt! F√ºr 1 kg ger√∂steten Kaffee braucht man etwa 5 kg frische Kaffeekirschen.',
                        hint: 'Im gleichen Land wie der Anbau - die Bohnen m√ºssen frisch verarbeitet werden.'
                    },
                    {
                        step: 3,
                        stepTitle: 'üö¢ Schritt 3: Export',
                        intro: 'Die getrockneten Kaffeebohnen (Rohkaffee) werden nun in S√§cken verpackt und nach Europa verschifft.',
                        question: 'Wie kommt der Rohkaffee von S√ºdamerika nach Europa?',
                        options: [
                            { country: 'Containerschiff', correct: true },
                            { country: 'Flugzeug', correct: false },
                            { country: 'Zug', correct: false },
                            { country: 'LKW', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Der Kaffee reist etwa 10.000 km √ºber den Atlantik! Die Seereise dauert 3-4 Wochen.',
                        hint: 'Der g√ºnstigste und umweltfreundlichste Weg √ºber den Ozean.'
                    },
                    {
                        step: 4,
                        stepTitle: 'üî• Schritt 4: R√∂stung',
                        intro: 'Die gr√ºnen Rohkaffeebohnen werden nun bei hohen Temperaturen ger√∂stet. Erst durch die R√∂stung entsteht das typische Kaffeearoma.',
                        question: 'Wo werden die Kaffeebohnen ger√∂stet?',
                        options: [
                            { country: 'Schweiz', correct: true },
                            { country: 'Brasilien', correct: false },
                            { country: '√Ñthiopien', correct: false },
                            { country: 'Vietnam', correct: false }
                        ],
                        correctAnswer: 'Schweiz',
                        fact: 'In der Schweiz gibt es viele traditionelle Kaffeer√∂stereien! Beim R√∂sten verlieren die Bohnen 15-20% ihres Gewichts durch Wasserverdampfung.',
                        hint: 'Das Land, in dem der Kaffee verkauft wird - frische R√∂stung f√ºr bestes Aroma!'
                    },
                    {
                        step: 5,
                        stepTitle: 'üì¶ Schritt 5: Verpackung',
                        intro: 'Die frisch ger√∂steten Bohnen werden gemahlen oder als ganze Bohnen in Packungen abgef√ºllt.',
                        question: 'Wo wird der Kaffee verpackt?',
                        options: [
                            { country: 'Schweiz', correct: true },
                            { country: 'Italien', correct: false },
                            { country: 'T√ºrkei', correct: false },
                            { country: 'Indien', correct: false }
                        ],
                        correctAnswer: 'Schweiz',
                        fact: 'Kaffee muss luftdicht verpackt werden, damit das Aroma erhalten bleibt! Ger√∂steter Kaffee ist nur etwa 2-4 Wochen optimal frisch.',
                        hint: 'Direkt dort, wo er ger√∂stet wurde - f√ºr maximale Frische!'
                    },
                    {
                        step: 6,
                        stepTitle: 'üè™ Schritt 6: Verkauf',
                        intro: 'Nun ist der Kaffee bereit und kann im Supermarkt oder Caf√© gekauft werden.',
                        question: 'Wo kaufst du deinen Kaffee?',
                        options: [
                            { country: 'Laden in der Schweiz', correct: true },
                            { country: 'Kolumbien', correct: false },
                            { country: 'Auf dem Schiff', correct: false },
                            { country: 'Deutschland', correct: false }
                        ],
                        correctAnswer: 'Laden in der Schweiz',
                        fact: 'Die Schweizer trinken durchschnittlich 3 Tassen Kaffee pro Tag! Dein Kaffee hat eine Reise von √ºber 10.000 km hinter sich.',
                        hint: 'Am Ende der Reise - dort, wo du wohnst!'
                    }
                ],
                totalDistance: '~10.000 km',
                funFact: 'Kaffee ist nach Erd√∂l das zweitwichtigste Handelsgut der Welt! Weltweit werden t√§glich √ºber 2 Milliarden Tassen Kaffee getrunken.',
                journey: [
                    { step: 1, location: 'Kolumbien', description: 'Kaffeeanbau' },
                    { step: 2, location: 'Kolumbien', description: 'Aufbereitung' },
                    { step: 3, location: 'Atlantik', description: 'Transport' },
                    { step: 4, location: 'Schweiz', description: 'R√∂stung' },
                    { step: 5, location: 'Schweiz', description: 'Verpackung' },
                    { step: 6, location: 'Schweiz', description: 'Verkauf' }
                ]
            }
        };

        function renderMenu() {
            return `
                <header>
                    <h1>üåç Weltreise von Alltagsgegenst√§nden</h1>
                    <a href="index.html" class="back-link">‚Üê Zur√ºck zum Lernpfad</a>
                </header>

                <main class="slide-in">
                    <!-- Aufklappbare Aufgaben-Sektion -->
                    <div class="expandable-section">
                        <div class="expandable-header" onclick="toggleExpand()">
                            <span>üìã Aufgaben zur Globalisierung im Alltag</span>
                            <span class="arrow">‚ñº</span>
                        </div>
                        <div class="expandable-content" id="expandable-content">
                            <div class="expandable-inner">
                                <div class="task-box">
                                    <h3>üìö Auftrag 1: Woher kommen Ihre Kleider?</h3>
                                    <p>Am Beispiel Ihrer Kleidung werden Sie sich zum Einstieg mit der Frage besch√§ftigen, was Globalisierung mit Ihrem Alltag zu tun hat.</p>
                                    <p style="margin-top: 1rem;"><strong>Besprechen Sie zu zweit:</strong></p>
                                    <ul style="margin-top: 0.5rem;">
                                        <li>Woher kommen Ihre Kleider?</li>
                                        <li>Schauen Sie sich die Etiketten der Kleider genauer an und analysieren Sie mit Hilfe einer Weltkarte, woher diese kamen.</li>
                                        <li>Notieren Sie Ihre Beobachtungen in Ihr OneNote.</li>
                                    </ul>
                                </div>

                                <div class="task-box">
                                    <h3>üìö Auftrag 2: Die Reise einer Jeans</h3>
                                    <p>Ihre Kleidung hat aber bereits mehr L√§nder gesehen, als dies die Etikette vermuten l√§sst. Schauen Sie sich das folgende Video zur Jeans an und beantworten Sie folgende Fragen:</p>
                                    <ul style="margin-top: 1rem;">
                                        <li><strong>a)</strong> Notieren Sie, wie viele L√§nder eine Jeans durchl√§uft, bis sie im Gesch√§ft gekauft werden kann.</li>
                                        <li><strong>b)</strong> Beschreiben Sie, was mit der Jeans geschieht, wenn Sie diese nicht mehr brauchen.</li>
                                        <li><strong>c)</strong> Notieren Sie Vermutungen, warum die Jeans nicht einfach von der Herstellung bis zur Entsorgung nur in einem Land bleibt.</li>
                                    </ul>
                                    <p style="margin-top: 1rem; font-style: italic; color: #92400e;">(Den Auftrag am Schluss des Videos m√ºssen Sie nicht bearbeiten.)</p>
                                </div>

                                <div style="margin-top: 1.5rem;">
                                    <h3 style="color: #1e3a8a; margin-bottom: 1rem;">üé¨ Video: Die Reise einer Jeans</h3>
                                    <div class="video-container">
                                        <iframe 
                                            src="https://www.youtube.com/embed/3X4wEijleNg" 
                                            title="Die Reise einer Jeans" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                            allowfullscreen>
                                        </iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>üéÆ Spiel zum Thema Globalisierung im Alltag</h2>
                        <h3 style="color: #1e3a8a; margin-top: 1.5rem; margin-bottom: 1rem;">Spielregeln</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">1Ô∏è‚É£ W√§hle</div>
                                <div class="info-value" style="font-size: 1rem;">Produkt</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">2Ô∏è‚É£ Beantworte</div>
                                <div class="info-value" style="font-size: 1rem;">Fragen</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">3Ô∏è‚É£ Sammle</div>
                                <div class="info-value" style="font-size: 1rem;">Punkte</div>
                            </div>
                        </div>
                        <p style="color: #666; line-height: 1.6; margin-top: 1rem;">
                            Folgen Sie der Supply Chain (=Lieferkette) Schritt f√ºr Schritt von der Rohstoffgewinnung bis in den Schweizer Laden. Jede richtige Antwort bringt 100 Punkte!
                        </p>
                    </div>

                    <div class="progress-card">
                        <div class="progress-info">
                            <div class="stat">
                                <span style="font-size: 1.5rem;">‚ù§Ô∏è</span>
                                <span>Leben: ${gameState.lives}</span>
                            </div>
                            <div class="stat">
                                <span style="font-size: 1.5rem;">‚≠ê</span>
                                <span>Punkte: ${gameState.score}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>W√§hle ein Produkt:</h2>
                        <div class="product-grid">
                            ${Object.entries(products).map(([key, product]) => `
                                <div class="product-card" onclick="startProduct('${key}')">
                                    <div class="product-icon">${product.icon}</div>
                                    <div class="product-name">${product.name}</div>
                                    <div class="product-info">${product.totalSteps} Schritte</div>
                                    <div class="product-info" style="margin-top: 0.5rem;">
                                        <div>üåç ${product.totalDistance}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Fazit-Sektion -->
                    <div class="expandable-section">
                        <div class="expandable-header" onclick="toggleFazit()">
                            <span>üìù Fazit zum Thema Globalisierung im Alltag</span>
                            <span class="arrow" id="fazit-arrow">‚ñº</span>
                        </div>
                        <div class="expandable-content" id="fazit-content">
                            <div class="expandable-inner">
                                <div class="task-box">
                                    <h3>üìö Auftrag 3: Reflexion</h3>
                                    <p>Notieren Sie nun in Ihrem OneNote drei Beobachtungen aus diesem Modul zum Thema Globalisierung im Alltag.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Abschluss-Button -->
                    <div class="completion-section" id="completion-section">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">Modul abschlie√üen</h3>
                        <p style="color: #666; margin-bottom: 1.5rem;">Haben Sie alle Aufgaben bearbeitet und das Spiel ausprobiert?</p>
                        <button id="completion-button" class="completion-button" onclick="markAsComplete()">
                            <span>‚úì</span>
                            <span id="button-text">Modul als abgeschlossen markieren</span>
                        </button>
                    </div>
                </main>
            `;
        }

        function renderGame() {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const shuffledOptions = gameState.shuffledOptions[gameState.currentStep];
            const progress = ((gameState.currentStep + 1) / product.questions.length) * 100;
            
            return `
                <header>
                    <h1>üåç ${product.icon} ${product.name}</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">‚Üê Zur√ºck zum Men√º</a>
                </header>

                <main class="slide-in">
                    <div class="progress-card">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">Dein Fortschritt</h3>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-info">
                            <div style="color: #666;">Schritt ${gameState.currentStep + 1} von ${product.questions.length}</div>
                            <div class="stat">
                                <span>‚ù§Ô∏è</span>
                                <span>${'‚ù§Ô∏è'.repeat(gameState.lives)}</span>
                            </div>
                            <div class="stat">
                                <span>‚≠ê</span>
                                <span>${gameState.score} Punkte</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-card">
                        <p style="font-size: 1.1rem; margin-bottom: 1rem; opacity: 0.95;">${question.intro}</p>
                        <h3>${question.question}</h3>
                        
                        ${gameState.showHint ? `
                            <div class="hint-box">
                                <p><strong>üí° Tipp:</strong> ${question.hint}</p>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">(Du erh√§ltst nur 75 Punkte statt 100)</p>
                            </div>
                        ` : `
                            <button onclick="showHint()" class="hint-button" style="margin-top: 1rem;">
                                üí° Tipp anzeigen (-25 Punkte)
                            </button>
                        `}
                    </div>

                    <div class="card">
                        <h3>W√§hle deine Antwort:</h3>
                        <div class="options-grid">
                            ${shuffledOptions.map(option => `
                                <div class="option-button" onclick="selectAnswer('${option.country}')">
                                    <div class="option-flag">${getFlagHTML(option.country)}</div>
                                    <div class="option-name">${option.country}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
            `;
        }

        function renderResult(isCorrect) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            
            return `
                <div class="modal">
                    <div class="modal-content ${isCorrect ? 'celebration' : ''}">
                        <div class="modal-icon">${isCorrect ? 'üéâ' : 'üòÖ'}</div>
                        <h2 class="modal-title" style="color: ${isCorrect ? '#10b981' : '#f59e0b'};">
                            ${isCorrect ? 'Richtig!' : 'Leider falsch!'}
                        </h2>
                        
                        ${isCorrect ? `
                            <div style="text-align: center; font-size: 2rem; font-weight: bold; color: #10b981; margin: 1rem 0;">
                                +${gameState.usedHint ? '75' : '100'} Punkte!
                            </div>
                        ` : `
                            <div style="text-align: center; color: #666; margin: 1rem 0;">
                                Die richtige Antwort war: <strong>${question.correctAnswer}</strong>
                            </div>
                            <div style="text-align: center; font-size: 1.5rem; color: #ef4444; margin: 1rem 0;">
                                -1 Leben ‚ù§Ô∏è
                            </div>
                        `}

                        <div class="fact-box">
                            <p><strong>üí° Wusstest du?</strong></p>
                            <p style="margin-top: 0.5rem;">${question.fact}</p>
                        </div>

                        ${gameState.currentStep < product.questions.length - 1 ? `
                            <button onclick="nextQuestion()" class="action-button" style="width: 100%; margin-top: 1rem;">
                                N√§chste Frage ‚Üí
                            </button>
                        ` : `
                            <button onclick="finishProduct()" class="action-button" style="width: 100%; margin-top: 1rem;">
                                Reise anzeigen üó∫Ô∏è
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function renderSummary() {
            const product = products[gameState.currentProduct];
            
            return `
                <header>
                    <h1>üó∫Ô∏è Die Reise deines ${product.icon} ${product.name}</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">‚Üê Zur√ºck zum Men√º</a>
                </header>

                <main class="slide-in">
                    <div class="card">
                        <h2>Die komplette Reise:</h2>
                        <p style="color: #666; margin-bottom: 1.5rem;">
                            Dein ${product.name} hat eine erstaunliche Weltreise hinter sich. Hier siehst du alle Stationen:
                        </p>

                        <div class="journey-steps">
                            ${product.journey.map((stop, index) => `
                                <div class="journey-step">
                                    <div class="journey-icon">${getFlagHTML(stop.location)}</div>
                                    <div class="journey-content">
                                        <div class="journey-location">
                                            Schritt ${stop.step}: ${stop.location}
                                        </div>
                                        <div class="journey-description">
                                            ${stop.description}
                                        </div>
                                    </div>
                                    ${index < product.journey.length - 1 ? `
                                        <div style="font-size: 1.5rem; color: #10b981;">‚Üí</div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">üìä Zusammenfassung</h3>
                        <div style="font-size: 1.5rem; color: #1e3a8a; margin: 1rem 0;">
                            <strong>${product.totalDistance}</strong> zur√ºckgelegt
                        </div>
                        <div style="font-size: 1.2rem; color: #1e40af;">
                            √úber <strong>${product.journey.length}</strong> verschiedene Stationen
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button onclick="showFinalResult()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            Weiter zur Auswertung ‚Üí
                        </button>
                    </div>
                </main>
            `;
        }

        function renderFinal() {
            const product = products[gameState.currentProduct];
            const totalQuestions = product.questions.length;
            const percentage = Math.round((gameState.correctInRound / totalQuestions) * 100);
            
            return `
                <header>
                    <h1>üèÜ ${product.icon} ${product.name} abgeschlossen!</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">‚Üê Zur√ºck zum Men√º</a>
                </header>

                <main class="slide-in">
                    <div class="card celebration">
                        <div style="text-align: center; font-size: 5rem; margin-bottom: 1.5rem;">üéâ</div>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">Punkte</div>
                                <div class="info-value">${gameState.score}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Richtig</div>
                                <div class="info-value">${gameState.correctInRound}/${totalQuestions}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Genauigkeit</div>
                                <div class="info-value">${percentage}%</div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; text-align: center;">
                            <div style="font-size: 1.2rem; color: #1e3a8a;">
                                Gesamte Distanz: <strong>${product.totalDistance}</strong>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
                        <h3 style="color: #92400e; margin-bottom: 1rem;">‚ú® Interessanter Fakt</h3>
                        <p style="color: #78350f; font-size: 1.1rem;">${product.funFact}</p>
                    </div>

                    ${percentage === 100 ? `
                        <div class="card" style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); text-align: center;">
                            <h3 style="color: #047857; font-size: 2rem; margin-bottom: 0.5rem;">üåü Perfekt!</h3>
                            <p style="color: #065f46;">Du bist ein Globalisierungs-Experte!</p>
                        </div>
                    ` : percentage >= 66 ? `
                        <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                            <h3 style="color: #1e40af; font-size: 2rem; margin-bottom: 0.5rem;">üëè Super!</h3>
                            <p style="color: #1e3a8a;">Sehr gut! Du kennst dich schon gut aus!</p>
                        </div>
                    ` : `
                        <div class="card" style="background: linear-gradient(135deg, #e9d5ff, #d8b4fe); text-align: center;">
                            <h3 style="color: #7c3aed; font-size: 2rem; margin-bottom: 0.5rem;">üí™ Weiter so!</h3>
                            <p style="color: #6b21a8;">Guter Start! Probiere weitere Produkte aus!</p>
                        </div>
                    `}

                    <div style="text-align: center;">
                        <button onclick="backToMenu()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            N√§chstes Produkt erkunden üöÄ
                        </button>
                    </div>
                </main>
            `;
        }

        function startProduct(productKey) {
            gameState.currentProduct = productKey;
            gameState.currentStep = 0;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            gameState.correctInRound = 0;
            
            // Shuffle options for each question
            const product = products[productKey];
            gameState.shuffledOptions = product.questions.map(q => shuffleArray(q.options));
            
            render();
        }

        function selectAnswer(answer) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const isCorrect = answer === question.correctAnswer;
            
            if (isCorrect) {
                gameState.score += gameState.usedHint ? 75 : 100;
                gameState.correctInRound++;
            } else {
                gameState.lives--;
                if (gameState.lives <= 0) {
                    alert('Game Over! üò¢ Du hast keine Leben mehr.\n\nDein finaler Score: ' + gameState.score + ' Punkte');
                    resetGame();
                    return;
                }
            }
            
            gameState.gameMode = 'result';
            gameState.lastAnswerCorrect = isCorrect;
            render();
        }

        function showHint() {
            gameState.showHint = true;
            gameState.usedHint = true;
            render();
        }

        function nextQuestion() {
            gameState.currentStep++;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            render();
        }

        function finishProduct() {
            gameState.gameMode = 'summary';
            render();
        }

        function showFinalResult() {
            gameState.gameMode = 'final';
            render();
        }

        function backToMenu() {
            gameState.gameMode = 'menu';
            gameState.currentProduct = null;
            render();
        }

        function resetGame() {
            gameState = {
                currentProduct: null,
                currentStep: 0,
                score: 0,
                lives: 3,
                correctInRound: 0,
                gameMode: 'menu',
                showHint: false,
                usedHint: false,
                shuffledOptions: []
            };
            render();
        }

        function toggleExpand() {
            const content = document.getElementById('expandable-content');
            const header = document.querySelector('.expandable-header');
            
            content.classList.toggle('open');
            header.classList.toggle('open');
        }

        function toggleFazit() {
            const content = document.getElementById('fazit-content');
            const arrow = document.getElementById('fazit-arrow');
            
            content.classList.toggle('open');
            
            // Rotiere den Pfeil
            if (content.classList.contains('open')) {
                arrow.style.transform = 'rotate(180deg)';
            } else {
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        function render() {
            const app = document.getElementById('app');
            
            if (gameState.gameMode === 'menu') {
                app.innerHTML = renderMenu();
            } else if (gameState.gameMode === 'playing') {
                app.innerHTML = renderGame();
            } else if (gameState.gameMode === 'result') {
                const gameHTML = renderGame();
                const resultHTML = renderResult(gameState.lastAnswerCorrect);
                app.innerHTML = gameHTML + resultHTML;
            } else if (gameState.gameMode === 'summary') {
                app.innerHTML = renderSummary();
            } else if (gameState.gameMode === 'final') {
                app.innerHTML = renderFinal();
            }

            // Initialisiere Scroll-Tracking und Button-Status nach Render
            initProgressTracking();
        }

        // Progress Tracking System
        let isModuleCompleted = false;

        function initProgressTracking() {
            // Pr√ºfe ob Modul bereits abgeschlossen wurde
            const completed = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
            if (completed.includes(1)) {
                isModuleCompleted = true;
                updateCompletionButton(true);
            }
        }

        function markAsComplete() {
            if (isModuleCompleted) return; // Bereits abgeschlossen

            // Markiere Modul als abgeschlossen im neuen System
            const completed = JSON.parse(localStorage.getItem('globalisierungProgress') || '[]');
            if (!completed.includes(1)) {
                completed.push(1);
                localStorage.setItem('globalisierungProgress', JSON.stringify(completed));
            }
            
            isModuleCompleted = true;
            updateCompletionButton(true);

            // Zeige Best√§tigung
            alert('‚úì Modul 1 erfolgreich abgeschlossen!\n\nIhr Fortschritt wurde gespeichert.');
        }

        function updateCompletionButton(completed) {
            const button = document.getElementById('completion-button');
            const buttonText = document.getElementById('button-text');
            
            if (button && buttonText) {
                if (completed) {
                    button.classList.add('completed');
                    buttonText.textContent = 'Modul abgeschlossen ‚úì';
                    button.disabled = true;
                } else {
                    button.classList.remove('completed');
                    buttonText.textContent = 'Modul als abgeschlossen markieren';
                    button.disabled = false;
                }
            }
        }

        // Initial render
        render();
    </script>
</body>
</html>
