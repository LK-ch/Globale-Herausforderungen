<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weltreise von AlltagsgegenstÃ¤nden</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            background: linear-gradient(135deg, #1e3a8a 0%, #0ea5e9 100%);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cdefs%3E%3CradialGradient id='globe' cx='50%25' cy='40%25'%3E%3Cstop offset='0%25' style='stop-color:%234a90e2;stop-opacity:1' /%3E%3Cstop offset='70%25' style='stop-color:%232c5aa0;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%231a3a6b;stop-opacity:1' /%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='400' cy='400' r='300' fill='url(%23globe)' opacity='0.3'/%3E%3Cg fill='%2334d399' opacity='0.4'%3E%3Cpath d='M 400 300 Q 420 310 425 340 Q 430 370 420 400 Q 410 430 400 450 Q 390 430 385 400 Q 380 360 390 330 Q 395 310 400 300 Z'/%3E%3Cpath d='M 380 260 Q 390 255 400 260 Q 410 265 415 275 Q 410 285 400 285 Q 390 285 385 280 Q 378 272 380 260 Z'/%3E%3Cpath d='M 430 250 Q 470 260 500 280 Q 520 300 530 330 Q 535 360 525 390 Q 515 410 500 420 Q 480 410 465 395 Q 450 375 445 350 Q 440 320 445 290 Q 440 270 430 250 Z'/%3E%3Cpath d='M 280 250 Q 300 240 320 245 Q 340 255 350 275 Q 355 300 345 325 Q 335 345 320 355 Q 305 350 295 335 Q 285 315 280 290 Q 275 270 280 250 Z'/%3E%3Cpath d='M 320 370 Q 330 365 340 375 Q 345 395 340 420 Q 335 450 325 475 Q 315 485 310 475 Q 305 455 308 430 Q 312 400 315 385 Q 318 375 320 370 Z'/%3E%3Cpath d='M 520 480 Q 540 475 555 485 Q 565 500 560 515 Q 550 525 535 522 Q 520 515 515 500 Q 513 487 520 480 Z'/%3E%3C/g%3E%3Cg stroke='%23ffffff' stroke-width='1' fill='none' opacity='0.15'%3E%3Cellipse cx='400' cy='400' rx='300' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='240'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='180'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='120'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='60'/%3E%3Cellipse cx='400' cy='400' rx='240' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='180' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='120' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='60' ry='300'/%3E%3Cline x1='400' y1='100' x2='400' y2='700'/%3E%3Cline x1='100' y1='400' x2='700' y2='400'/%3E%3C/g%3E%3C/svg%3E");
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: -1;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2.5rem;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            color: #666;
        }

        .back-link {
            display: inline-block;
            margin: 1rem 0 0 0;
            color: #0ea5e9;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        main {
            flex: 1;
            max-width: 1000px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 1rem 2rem 1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .card h2 {
            color: #1e3a8a;
            margin-bottom: 1rem;
        }

        .card h3 {
            color: #1e3a8a;
            margin-bottom: 0.75rem;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .product-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .product-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-info {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .progress-bar-container {
            background: #e5e7eb;
            height: 10px;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: bold;
            color: #1e3a8a;
        }

        .question-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .question-card h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .hint-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .hint-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .hint-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .option-button {
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid #e5e7eb;
            padding: 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .option-button:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.2);
        }

        .option-flag {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .option-name {
            font-weight: bold;
            color: #1e3a8a;
            font-size: 1.1rem;
        }

        .action-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 2rem;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-icon {
            font-size: 5rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            color: #1e3a8a;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .fact-box {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .fact-box p {
            color: #1e3a8a;
            line-height: 1.6;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .info-item {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .tips-box {
            background: #dcfce7;
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .tips-box h4 {
            color: #059669;
            margin-bottom: 0.75rem;
        }

        .tips-box ul {
            list-style: none;
            padding: 0;
        }

        .tips-box li {
            color: #166534;
            padding: 0.5rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes celebration {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-10deg) scale(1.1); }
            75% { transform: rotate(10deg) scale(1.1); }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        .celebration {
            animation: celebration 0.6s ease-in-out 2;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Shuffle function to randomize options
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Game State
        let gameState = {
            currentProduct: null,
            currentStep: 0,
            score: 0,
            lives: 3,
            correctInRound: 0,
            gameMode: 'menu', // menu, playing, result, summary, final
            showHint: false,
            usedHint: false,
            shuffledOptions: []
        };

        // Product data with chronological questions following the supply chain
        const products = {
            tshirt: {
                name: 'T-Shirt',
                icon: 'ğŸ‘•',
                color: '#3B82F6',
                gradient: 'from-blue-500 to-blue-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'ğŸŒ± Schritt 1: Rohstoffe',
                        intro: 'Um ein T-Shirt herzustellen, braucht es Baumwolle, die von der Baumwollpflanze stammt.',
                        question: 'Wo wird die Baumwolle fÃ¼r dein T-Shirt hauptsÃ¤chlich angebaut?',
                        options: [
                            { country: 'Indien', flag: 'ğŸ‡®ğŸ‡³', correct: true },
                            { country: 'Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: false },
                            { country: 'Deutschland', flag: 'ğŸ‡©ğŸ‡ª', correct: false },
                            { country: 'Kanada', flag: 'ğŸ‡¨ğŸ‡¦', correct: false }
                        ],
                        correctAnswer: 'Indien',
                        fact: 'Indien ist der zweitgrÃ¶ÃŸte Baumwollproduzent der Welt! Ein einziges T-Shirt benÃ¶tigt etwa 2.700 Liter Wasser beim Anbau.',
                        hint: 'Dieses Land in SÃ¼dasien ist bekannt fÃ¼r seine groÃŸe Textilproduktion.'
                    },
                    {
                        step: 2,
                        stepTitle: 'ğŸ§µ Schritt 2: Spinnen & Weben',
                        intro: 'Die geerntete Baumwolle muss nun zu Garn gesponnen und dann zu Stoff gewebt werden.',
                        question: 'In welchem Land wird die Baumwolle zu Garn gesponnen und zu Stoff gewebt?',
                        options: [
                            { country: 'China', flag: 'ğŸ‡¨ğŸ‡³', correct: true },
                            { country: 'Italien', flag: 'ğŸ‡®ğŸ‡¹', correct: false },
                            { country: 'USA', flag: 'ğŸ‡ºğŸ‡¸', correct: false },
                            { country: 'Brasilien', flag: 'ğŸ‡§ğŸ‡·', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China ist die weltgrÃ¶ÃŸte Textilindustrie und verarbeitet Baumwolle aus der ganzen Welt zu Stoffen.',
                        hint: 'Die â€Werkbank der Welt" in Ostasien.'
                    },
                    {
                        step: 3,
                        stepTitle: 'ğŸ¨ Schritt 3: FÃ¤rben & Veredeln',
                        intro: 'Der rohe, weiÃŸe Stoff wird nun gefÃ¤rbt und chemisch behandelt, um ihm Farbe und besondere Eigenschaften zu geben.',
                        question: 'Wo wird der Stoff oft gefÃ¤rbt und chemisch behandelt?',
                        options: [
                            { country: 'China', flag: 'ğŸ‡¨ğŸ‡³', correct: true },
                            { country: 'Norwegen', flag: 'ğŸ‡³ğŸ‡´', correct: false },
                            { country: 'Australien', flag: 'ğŸ‡¦ğŸ‡º', correct: false },
                            { country: 'Argentinien', flag: 'ğŸ‡¦ğŸ‡·', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'Beim FÃ¤rben werden oft groÃŸe Mengen Wasser und Chemikalien verwendet. Dies kann die Umwelt stark belasten.',
                        hint: 'Oft im gleichen Land wie das Weben - effizient fÃ¼r kurze Transportwege.'
                    },
                    {
                        step: 4,
                        stepTitle: 'âœ‚ï¸ Schritt 4: NÃ¤hen',
                        intro: 'Der gefÃ¤rbte Stoff wird nun zugeschnitten und zu fertigen T-Shirts zusammengenÃ¤ht.',
                        question: 'In welchem Land werden viele T-Shirts zusammengenÃ¤ht?',
                        options: [
                            { country: 'Bangladesh', flag: 'ğŸ‡§ğŸ‡©', correct: true },
                            { country: 'Finnland', flag: 'ğŸ‡«ğŸ‡®', correct: false },
                            { country: 'Mexiko', flag: 'ğŸ‡²ğŸ‡½', correct: false },
                            { country: 'Japan', flag: 'ğŸ‡¯ğŸ‡µ', correct: false }
                        ],
                        correctAnswer: 'Bangladesh',
                        fact: 'Bangladesh ist eines der grÃ¶ÃŸten TextilproduktionslÃ¤nder. Tausende Menschen arbeiten in NÃ¤hereien â€“ oft unter schwierigen Bedingungen.',
                        hint: 'Ein sÃ¼dasiatisches Land, Nachbar von Indien, bekannt fÃ¼r gÃ¼nstige Textilproduktion.'
                    },
                    {
                        step: 5,
                        stepTitle: 'ğŸš¢ Schritt 5: Transport',
                        intro: 'Das fertige T-Shirt muss nun von Asien in die Schweiz transportiert werden.',
                        question: 'Wie kommt dein T-Shirt in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', flag: 'ğŸš¢', correct: true },
                            { country: 'Flugzeug', flag: 'âœˆï¸', correct: false },
                            { country: 'Zug', flag: 'ğŸš‚', correct: false },
                            { country: 'LKW direkt', flag: 'ğŸš›', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Dein T-Shirt reist etwa 15.000 km auf einem Containerschiff Ã¼ber den Ozean. Die Reise dauert 4-6 Wochen!',
                        hint: 'Der gÃ¼nstigste und umweltfreundlichste Weg fÃ¼r lange Distanzen.'
                    },
                    {
                        step: 6,
                        stepTitle: 'ğŸª Schritt 6: Verkauf',
                        intro: 'Nach der langen Reise ist das T-Shirt endlich in Europa angekommen.',
                        question: 'Wo kaufst du dein T-Shirt schlieÃŸlich?',
                        options: [
                            { country: 'GeschÃ¤ft in der Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: true },
                            { country: 'Direkt in China', flag: 'ğŸ‡¨ğŸ‡³', correct: false },
                            { country: 'Online aus Indien', flag: 'ğŸ‡®ğŸ‡³', correct: false },
                            { country: 'Im Hafen', flag: 'âš“', correct: false }
                        ],
                        correctAnswer: 'GeschÃ¤ft in der Schweiz',
                        fact: 'Nach seiner Weltreise von Ã¼ber 15.000 km landet dein T-Shirt endlich im Schweizer Laden. Es wurde von Ã¼ber 20 verschiedenen HÃ¤nden berÃ¼hrt!',
                        hint: 'Am Ende der Reise â€“ dort wo du lebst!'
                    }
                ],
                totalDistance: '~15.000 km',
                funFact: 'Ein durchschnittliches T-Shirt reist weiter als die meisten Menschen in einem Jahr!',
                journey: [
                    { step: 1, location: 'Indien', icon: 'ğŸ‡®ğŸ‡³', description: 'Baumwollanbau' },
                    { step: 2, location: 'China', icon: 'ğŸ‡¨ğŸ‡³', description: 'Spinnen & Weben' },
                    { step: 3, location: 'China', icon: 'ğŸ‡¨ğŸ‡³', description: 'FÃ¤rben' },
                    { step: 4, location: 'Bangladesh', icon: 'ğŸ‡§ğŸ‡©', description: 'NÃ¤hen' },
                    { step: 5, location: 'Ozean', icon: 'ğŸš¢', description: 'Transport' },
                    { step: 6, location: 'Schweiz', icon: 'ğŸ‡¨ğŸ‡­', description: 'Verkauf' }
                ]
            },
            smartphone: {
                name: 'Smartphone',
                icon: 'ğŸ“±',
                color: '#8B5CF6',
                gradient: 'from-purple-500 to-purple-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'â›ï¸ Schritt 1: Rohstoffabbau',
                        intro: 'Ein Smartphone besteht aus Ã¼ber 60 verschiedenen Materialien. FÃ¼r die Elektronik werden seltene Erden und Coltan benÃ¶tigt.',
                        question: 'Wo werden seltene Erden und Coltan fÃ¼r dein Smartphone abgebaut?',
                        options: [
                            { country: 'Kongo', flag: 'ğŸ‡¨ğŸ‡©', correct: true },
                            { country: 'GrÃ¶nland', flag: 'ğŸ‡¬ğŸ‡±', correct: false },
                            { country: 'Island', flag: 'ğŸ‡®ğŸ‡¸', correct: false },
                            { country: 'Neuseeland', flag: 'ğŸ‡³ğŸ‡¿', correct: false }
                        ],
                        correctAnswer: 'Kongo',
                        fact: 'Der Kongo besitzt 80% der weltweiten Coltan-Reserven! Ãœber 60 verschiedene Materialien werden fÃ¼r ein Smartphone benÃ¶tigt.',
                        hint: 'Ein zentralafrikanisches Land mit reichen BodenschÃ¤tzen.'
                    },
                    {
                        step: 2,
                        stepTitle: 'ğŸ’¾ Schritt 2: Chip-Produktion',
                        intro: 'Das HerzstÃ¼ck eines Smartphones sind die Mikrochips. Diese winzigen, aber extrem komplexen Bauteile werden in High-Tech-Fabriken hergestellt.',
                        question: 'Wo werden die komplexen Mikrochips hergestellt?',
                        options: [
                            { country: 'Taiwan', flag: 'ğŸ‡¹ğŸ‡¼', correct: true },
                            { country: 'Portugal', flag: 'ğŸ‡µğŸ‡¹', correct: false },
                            { country: 'Ã„gypten', flag: 'ğŸ‡ªğŸ‡¬', correct: false },
                            { country: 'Peru', flag: 'ğŸ‡µğŸ‡ª', correct: false }
                        ],
                        correctAnswer: 'Taiwan',
                        fact: 'Taiwan produziert Ã¼ber 60% der weltweiten Mikrochips! Eine einzige Chip-Fabrik kostet mehrere Milliarden Dollar zu bauen.',
                        hint: 'Eine Insel vor der KÃ¼ste Chinas, WeltmarktfÃ¼hrer in der Halbleiterproduktion.'
                    },
                    {
                        step: 3,
                        stepTitle: 'ğŸ“± Schritt 3: Display-Herstellung',
                        intro: 'Das Display ist eines der teuersten und aufwendigsten Teile eines Smartphones. Es wird in spezialisierten Fabriken gefertigt.',
                        question: 'Wo werden die hochauflÃ¶senden Displays produziert?',
                        options: [
                            { country: 'SÃ¼dkorea', flag: 'ğŸ‡°ğŸ‡·', correct: true },
                            { country: 'Polen', flag: 'ğŸ‡µğŸ‡±', correct: false },
                            { country: 'TÃ¼rkei', flag: 'ğŸ‡¹ğŸ‡·', correct: false },
                            { country: 'Chile', flag: 'ğŸ‡¨ğŸ‡±', correct: false }
                        ],
                        correctAnswer: 'SÃ¼dkorea',
                        fact: 'SÃ¼dkorea und Japan sind fÃ¼hrend in der Display-Technologie. Ein modernes Display hat mehr Pixel als das menschliche Auge unterscheiden kann!',
                        hint: 'Bekannt fÃ¼r Technologie-Giganten wie Samsung und LG.'
                    },
                    {
                        step: 4,
                        stepTitle: 'ğŸ”§ Schritt 4: Zusammenbau',
                        intro: 'Alle Einzelteile - Chips, Display, Kamera, Batterie und hunderte weitere Komponenten - werden nun zusammengesetzt.',
                        question: 'Wo werden die Smartphones zusammengesetzt?',
                        options: [
                            { country: 'China', flag: 'ğŸ‡¨ğŸ‡³', correct: true },
                            { country: 'Finnland', flag: 'ğŸ‡«ğŸ‡®', correct: false },
                            { country: 'Spanien', flag: 'ğŸ‡ªğŸ‡¸', correct: false },
                            { country: 'SÃ¼dafrika', flag: 'ğŸ‡¿ğŸ‡¦', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'In riesigen Fabriken in Shenzhen werden tÃ¤glich Ã¼ber 500.000 Smartphones produziert! Die Arbeiter*innen setzen hunderte Einzelteile zusammen.',
                        hint: 'Die â€Werkbank der Welt" â€“ auch Shenzhen genannt, die Tech-Hauptstadt.'
                    },
                    {
                        step: 5,
                        stepTitle: 'ğŸ“¦ Schritt 5: Verpackung & Transport',
                        intro: 'Das fertige Smartphone wird in seine Verpackung gelegt und muss nun schnell zu den Kunden gebracht werden.',
                        question: 'Wie wird dein neues Smartphone in die Schweiz transportiert?',
                        options: [
                            { country: 'Luftfracht', flag: 'âœˆï¸', correct: true },
                            { country: 'Schiff', flag: 'ğŸš¢', correct: false },
                            { country: 'Zug', flag: 'ğŸš‚', correct: false },
                            { country: 'Auto', flag: 'ğŸš—', correct: false }
                        ],
                        correctAnswer: 'Luftfracht',
                        fact: 'Neue Smartphones werden oft per Flugzeug transportiert, um schnell in den LÃ¤den zu sein. Das ist schnell, aber sehr umweltbelastend!',
                        hint: 'Der schnellste, aber umweltschÃ¤dlichste Transportweg.'
                    },
                    {
                        step: 6,
                        stepTitle: 'ğŸ›ï¸ Schritt 6: Im Laden',
                        intro: 'Nach seiner Reise durch viele LÃ¤nder ist das Smartphone endlich beim VerkÃ¤ufer angekommen.',
                        question: 'Wo kaufst du dein Smartphone?',
                        options: [
                            { country: 'ElektronikgeschÃ¤ft CH', flag: 'ğŸ‡¨ğŸ‡­', correct: true },
                            { country: 'Direkt aus China', flag: 'ğŸ‡¨ğŸ‡³', correct: false },
                            { country: 'Vom Flughafen', flag: 'âœˆï¸', correct: false },
                            { country: 'Aus Taiwan', flag: 'ğŸ‡¹ğŸ‡¼', correct: false }
                        ],
                        correctAnswer: 'ElektronikgeschÃ¤ft CH',
                        fact: 'Nach einer Reise von ca. 20.000 km und Teilen aus Ã¼ber 10 verschiedenen LÃ¤ndern liegt dein Smartphone endlich im Schweizer Laden!',
                        hint: 'Der letzte Stopp der Reise in deinem Heimatland.'
                    }
                ],
                totalDistance: '~20.000 km',
                funFact: 'Ein Smartphone enthÃ¤lt mehr Rechenleistung als die Computer, die Apollo 11 zum Mond gebracht haben!',
                journey: [
                    { step: 1, location: 'Kongo', icon: 'ğŸ‡¨ğŸ‡©', description: 'Rohstoffabbau' },
                    { step: 2, location: 'Taiwan', icon: 'ğŸ‡¹ğŸ‡¼', description: 'Chip-Produktion' },
                    { step: 3, location: 'SÃ¼dkorea', icon: 'ğŸ‡°ğŸ‡·', description: 'Display-Herstellung' },
                    { step: 4, location: 'China', icon: 'ğŸ‡¨ğŸ‡³', description: 'Zusammenbau' },
                    { step: 5, location: 'Flugzeug', icon: 'âœˆï¸', description: 'Luftfracht' },
                    { step: 6, location: 'Schweiz', icon: 'ğŸ‡¨ğŸ‡­', description: 'Verkauf' }
                ]
            },
            coffee: {
                name: 'Kaffee',
                icon: 'â˜•',
                color: '#D97706',
                gradient: 'from-amber-600 to-amber-700',
                totalSteps: 5,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'ğŸŒ± Schritt 1: Anbau',
                        intro: 'Kaffee wÃ¤chst an StrÃ¤uchern in tropischen Regionen. Die Kaffeepflanze braucht viel Sonne, Regen und die richtige HÃ¶henlage.',
                        question: 'Welches Land ist der grÃ¶ÃŸte Kaffeeproduzent der Welt?',
                        options: [
                            { country: 'Brasilien', flag: 'ğŸ‡§ğŸ‡·', correct: true },
                            { country: 'Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: false },
                            { country: 'Russland', flag: 'ğŸ‡·ğŸ‡º', correct: false },
                            { country: 'Kanada', flag: 'ğŸ‡¨ğŸ‡¦', correct: false }
                        ],
                        correctAnswer: 'Brasilien',
                        fact: 'Brasilien produziert etwa ein Drittel des weltweiten Kaffees! Die Kaffeebohnen wachsen an StrÃ¤uchern in tropischen Regionen.',
                        hint: 'Das grÃ¶ÃŸte Land in SÃ¼damerika.'
                    },
                    {
                        step: 2,
                        stepTitle: 'ğŸŒ¾ Schritt 2: Ernte',
                        intro: 'Wenn die Kaffeekirschen reif sind, werden sie geerntet. In den Kirschen stecken die wertvollen Kaffeebohnen.',
                        question: 'Wo wird der hochwertigste Arabica-Kaffee traditionell geerntet?',
                        options: [
                            { country: 'Ã„thiopien', flag: 'ğŸ‡ªğŸ‡¹', correct: true },
                            { country: 'Schweden', flag: 'ğŸ‡¸ğŸ‡ª', correct: false },
                            { country: 'Japan', flag: 'ğŸ‡¯ğŸ‡µ', correct: false },
                            { country: 'Frankreich', flag: 'ğŸ‡«ğŸ‡·', correct: false }
                        ],
                        correctAnswer: 'Ã„thiopien',
                        fact: 'Ã„thiopien ist die GeburtsstÃ¤tte des Kaffees! Hier wÃ¤chst Kaffee noch wild im Hochland. Die Ernte erfolgt oft von Hand.',
                        hint: 'Ein ostafrikanisches Hochland â€“ die Heimat des Kaffees.'
                    },
                    {
                        step: 3,
                        stepTitle: 'ğŸš¢ Schritt 3: Export',
                        intro: 'Die getrockneten, grÃ¼nen Kaffeebohnen werden in groÃŸe SÃ¤cke verpackt und mÃ¼ssen nun nach Europa transportiert werden.',
                        question: 'Wie reisen die grÃ¼nen Kaffeebohnen nach Europa?',
                        options: [
                            { country: 'Containerschiff', flag: 'ğŸš¢', correct: true },
                            { country: 'Flugzeug', flag: 'âœˆï¸', correct: false },
                            { country: 'U-Boot', flag: 'ğŸ¤¿', correct: false },
                            { country: 'Drohne', flag: 'ğŸš', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Die grÃ¼nen Kaffeebohnen reisen in groÃŸen SÃ¤cken per Schiff nach Europa. Die Reise kann 4-8 Wochen dauern!',
                        hint: 'Der klassische Weg fÃ¼r Rohstoffe Ã¼ber den Ozean.'
                    },
                    {
                        step: 4,
                        stepTitle: 'ğŸ”¥ Schritt 4: RÃ¶stung',
                        intro: 'Die grÃ¼nen Bohnen haben noch kein Kaffeearoma. Erst beim RÃ¶sten entwickelt sich der typische Duft und Geschmack.',
                        question: 'In welchem Land wird der Kaffee fÃ¼r Europa oft gerÃ¶stet?',
                        options: [
                            { country: 'Deutschland', flag: 'ğŸ‡©ğŸ‡ª', correct: true },
                            { country: 'Thailand', flag: 'ğŸ‡¹ğŸ‡­', correct: false },
                            { country: 'Chile', flag: 'ğŸ‡¨ğŸ‡±', correct: false },
                            { country: 'Indien', flag: 'ğŸ‡®ğŸ‡³', correct: false }
                        ],
                        correctAnswer: 'Deutschland',
                        fact: 'Deutschland ist Europas grÃ¶ÃŸter KaffeerÃ¶ster! Beim RÃ¶sten entwickelt sich erst das typische Kaffeearoma und die braune Farbe.',
                        hint: 'Europas grÃ¶ÃŸte Wirtschaft, bekannt fÃ¼r QualitÃ¤t und PrÃ¤zision.'
                    },
                    {
                        step: 5,
                        stepTitle: 'â˜• Schritt 5: In deiner Tasse',
                        intro: 'Der gerÃ¶stete Kaffee wird gemahlen und ist bereit, als leckeres GetrÃ¤nk genossen zu werden.',
                        question: 'Wo genieÃŸt du deinen Kaffee?',
                        options: [
                            { country: 'Zuhause in der Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: true },
                            { country: 'In Brasilien', flag: 'ğŸ‡§ğŸ‡·', correct: false },
                            { country: 'In Ã„thiopien', flag: 'ğŸ‡ªğŸ‡¹', correct: false },
                            { country: 'Auf dem Schiff', flag: 'ğŸš¢', correct: false }
                        ],
                        correctAnswer: 'Zuhause in der Schweiz',
                        fact: 'Nach seiner langen Reise kannst du endlich deinen Kaffee genieÃŸen! FÃ¼r eine Tasse werden etwa 140 Liter Wasser benÃ¶tigt (Anbau inklusive).',
                        hint: 'Da wo du jetzt sitzt!'
                    }
                ],
                totalDistance: '~10.000 km',
                funFact: 'Kaffee ist nach ErdÃ¶l das zweitwertvollste Handelsgut der Welt!',
                journey: [
                    { step: 1, location: 'Brasilien', icon: 'ğŸ‡§ğŸ‡·', description: 'Anbau' },
                    { step: 2, location: 'Ã„thiopien', icon: 'ğŸ‡ªğŸ‡¹', description: 'Ernte' },
                    { step: 3, location: 'Ozean', icon: 'ğŸš¢', description: 'Export' },
                    { step: 4, location: 'Deutschland', icon: 'ğŸ‡©ğŸ‡ª', description: 'RÃ¶stung' },
                    { step: 5, location: 'Schweiz', icon: 'ğŸ‡¨ğŸ‡­', description: 'Genuss' }
                ]
            },
            sneakers: {
                name: 'Sneakers',
                icon: 'ğŸ‘Ÿ',
                color: '#EF4444',
                gradient: 'from-red-500 to-red-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: 'ğŸŒ³ Schritt 1: Naturkautschuk',
                        intro: 'FÃ¼r flexible Schuhsohlen wird Naturkautschuk benÃ¶tigt, der vom Gummibaum gewonnen wird.',
                        question: 'Wo wird der Naturkautschuk fÃ¼r die Schuhsohlen gewonnen?',
                        options: [
                            { country: 'Malaysia', flag: 'ğŸ‡²ğŸ‡¾', correct: true },
                            { country: 'Ã–sterreich', flag: 'ğŸ‡¦ğŸ‡¹', correct: false },
                            { country: 'Polen', flag: 'ğŸ‡µğŸ‡±', correct: false },
                            { country: 'Irland', flag: 'ğŸ‡®ğŸ‡ª', correct: false }
                        ],
                        correctAnswer: 'Malaysia',
                        fact: 'Malaysia ist einer der grÃ¶ÃŸten Kautschuk-Produzenten! Kautschuk wird vom Gummibaum gewonnen und macht die Sohlen flexibel.',
                        hint: 'Ein sÃ¼dostasiatisches Land mit tropischem Klima â€“ ideal fÃ¼r GummibÃ¤ume.'
                    },
                    {
                        step: 2,
                        stepTitle: 'ğŸ­ Schritt 2: Material-Verarbeitung',
                        intro: 'Neben Kautschuk braucht ein Sneaker viele synthetische Materialien wie Kunststoffe, Schaumstoffe und Textilien.',
                        question: 'Wo werden die synthetischen Materialien fÃ¼r Sneakers hergestellt?',
                        options: [
                            { country: 'China', flag: 'ğŸ‡¨ğŸ‡³', correct: true },
                            { country: 'Belgien', flag: 'ğŸ‡§ğŸ‡ª', correct: false },
                            { country: 'Neuseeland', flag: 'ğŸ‡³ğŸ‡¿', correct: false },
                            { country: 'Kenia', flag: 'ğŸ‡°ğŸ‡ª', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert die meisten synthetischen Materialien. Gummi wird vulkanisiert, Stoffe gewebt und Kunststoffe geformt.',
                        hint: 'Die weltgrÃ¶ÃŸte Produktionsnation fÃ¼r Materialien aller Art.'
                    },
                    {
                        step: 3,
                        stepTitle: 'ğŸ‘Ÿ Schritt 3: Schuh-Produktion',
                        intro: 'Aus Ã¼ber 65 verschiedenen Einzelteilen wird nun ein fertiger Sneaker zusammengesetzt. Das erfordert viele Arbeitsschritte.',
                        question: 'In welchem Land werden die meisten Sportschuhe zusammengebaut?',
                        options: [
                            { country: 'Vietnam', flag: 'ğŸ‡»ğŸ‡³', correct: true },
                            { country: 'DÃ¤nemark', flag: 'ğŸ‡©ğŸ‡°', correct: false },
                            { country: 'Marokko', flag: 'ğŸ‡²ğŸ‡¦', correct: false },
                            { country: 'Argentinien', flag: 'ğŸ‡¦ğŸ‡·', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Vietnam produziert fast ein Drittel aller Schuhe weltweit! Ein Paar Sneakers durchlÃ¤uft Ã¼ber 360 verschiedene Arbeitsschritte.',
                        hint: 'Ein sÃ¼dostasiatisches Land, Nachbar von China, wichtiger Produktionsstandort.'
                    },
                    {
                        step: 4,
                        stepTitle: 'âœ“ Schritt 4: QualitÃ¤tskontrolle',
                        intro: 'Bevor die Schuhe verschickt werden, muss jedes Paar geprÃ¼ft werden, ob es den QualitÃ¤tsstandards entspricht.',
                        question: 'Wo werden die fertigen Schuhe geprÃ¼ft und verpackt?',
                        options: [
                            { country: 'Vietnam', flag: 'ğŸ‡»ğŸ‡³', correct: true },
                            { country: 'Italien', flag: 'ğŸ‡®ğŸ‡¹', correct: false },
                            { country: 'USA', flag: 'ğŸ‡ºğŸ‡¸', correct: false },
                            { country: 'Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Jeder Schuh wird geprÃ¼ft, ob er den Standards entspricht. Dann werden sie verpackt und fÃ¼r den Export vorbereitet.',
                        hint: 'Im gleichen Land wie die Produktion â€“ effizienter Transport.'
                    },
                    {
                        step: 5,
                        stepTitle: 'ğŸš¢ Schritt 5: Seefracht',
                        intro: 'Die verpackten Sneakers werden in Container geladen und auf die lange Reise nach Europa geschickt.',
                        question: 'Wie gelangen deine Sneakers nach Europa?',
                        options: [
                            { country: 'Containerschiff', flag: 'ğŸš¢', correct: true },
                            { country: 'Flugzeug', flag: 'âœˆï¸', correct: false },
                            { country: 'Rakete', flag: 'ğŸš€', correct: false },
                            { country: 'Zu FuÃŸ', flag: 'ğŸ‘£', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Die Sneakers reisen etwa 6-8 Wochen in Containern Ã¼ber den Pazifik und durch den Suezkanal nach Europa.',
                        hint: 'Die gÃ¼nstigste Methode fÃ¼r schwere GÃ¼ter Ã¼ber lange Distanzen.'
                    },
                    {
                        step: 6,
                        stepTitle: 'ğŸª Schritt 6: Im SportgeschÃ¤ft',
                        intro: 'Nach ihrer langen Reise sind die Sneakers endlich in Europa angekommen und werden an die GeschÃ¤fte verteilt.',
                        question: 'Wo stehen deine Sneakers schlieÃŸlich im Regal?',
                        options: [
                            { country: 'SportgeschÃ¤ft Schweiz', flag: 'ğŸ‡¨ğŸ‡­', correct: true },
                            { country: 'Fabrik Vietnam', flag: 'ğŸ‡»ğŸ‡³', correct: false },
                            { country: 'Hafen Hamburg', flag: 'âš“', correct: false },
                            { country: 'Online-Lager China', flag: 'ğŸ“¦', correct: false }
                        ],
                        correctAnswer: 'SportgeschÃ¤ft Schweiz',
                        fact: 'Nach 18.000 km und Ã¼ber 50 verschiedenen HÃ¤nden stehen deine Sneakers endlich im Schweizer SportgeschÃ¤ft!',
                        hint: 'Am Ende der langen Reise â€“ in deiner Heimat!'
                    }
                ],
                totalDistance: '~18.000 km',
                funFact: 'Die globale Schuhindustrie produziert jÃ¤hrlich Ã¼ber 24 Milliarden Paar Schuhe!',
                journey: [
                    { step: 1, location: 'Malaysia', icon: 'ğŸ‡²ğŸ‡¾', description: 'Kautschuk' },
                    { step: 2, location: 'China', icon: 'ğŸ‡¨ğŸ‡³', description: 'Material-Verarbeitung' },
                    { step: 3, location: 'Vietnam', icon: 'ğŸ‡»ğŸ‡³', description: 'Produktion' },
                    { step: 4, location: 'Vietnam', icon: 'ğŸ‡»ğŸ‡³', description: 'QualitÃ¤tskontrolle' },
                    { step: 5, location: 'Ozean', icon: 'ğŸš¢', description: 'Seefracht' },
                    { step: 6, location: 'Schweiz', icon: 'ğŸ‡¨ğŸ‡­', description: 'Verkauf' }
                ]
            }
        };

        function renderMenu() {
            return `
                <header>
                    <h1>ğŸŒ Weltreise von AlltagsgegenstÃ¤nden</h1>
                    <a href="index.html" class="back-link">â† ZurÃ¼ck zum Lernpfad</a>
                </header>

                <main class="slide-in">
                    <div class="card">
                        <h2>ğŸ“‹ Spielregeln</h2>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">1ï¸âƒ£ WÃ¤hle</div>
                                <div class="info-value" style="font-size: 1rem;">Produkt</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">2ï¸âƒ£ Beantworte</div>
                                <div class="info-value" style="font-size: 1rem;">Fragen</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">3ï¸âƒ£ Sammle</div>
                                <div class="info-value" style="font-size: 1rem;">Punkte</div>
                            </div>
                        </div>
                        <p style="color: #666; line-height: 1.6;">
                            Folge der Supply Chain Schritt fÃ¼r Schritt von der Rohstoffgewinnung bis in den Schweizer Laden. 
                            Jede richtige Antwort bringt dir <strong>100 Punkte</strong>!
                        </p>
                    </div>

                    <div class="progress-card">
                        <div class="progress-info">
                            <div class="stat">
                                <span style="font-size: 1.5rem;">â¤ï¸</span>
                                <span>Leben: ${gameState.lives}</span>
                            </div>
                            <div class="stat">
                                <span style="font-size: 1.5rem;">â­</span>
                                <span>Punkte: ${gameState.score}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>WÃ¤hle ein Produkt:</h2>
                        <div class="product-grid">
                            ${Object.entries(products).map(([key, product]) => `
                                <div class="product-card" onclick="startProduct('${key}')">
                                    <div class="product-icon">${product.icon}</div>
                                    <div class="product-name">${product.name}</div>
                                    <div class="product-info">${product.totalSteps} Schritte</div>
                                    <div class="product-info" style="margin-top: 0.5rem;">
                                        <div>ğŸŒ ${product.totalDistance}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
            `;
        }

        function renderGame() {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const shuffledOptions = gameState.shuffledOptions[gameState.currentStep];
            const progress = ((gameState.currentStep + 1) / product.questions.length) * 100;
            
            return `
                <header>
                    <h1>ğŸŒ ${product.icon} ${product.name}</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">â† ZurÃ¼ck zum MenÃ¼</a>
                </header>

                <main class="slide-in">
                    <div class="progress-card">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">Dein Fortschritt</h3>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-info">
                            <div style="color: #666;">Schritt ${gameState.currentStep + 1} von ${product.questions.length}</div>
                            <div class="stat">
                                <span>â¤ï¸</span>
                                <span>${'â¤ï¸'.repeat(gameState.lives)}</span>
                            </div>
                            <div class="stat">
                                <span>â­</span>
                                <span>${gameState.score} Punkte</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-card">
                        <p style="font-size: 1.1rem; margin-bottom: 1rem; opacity: 0.95;">${question.intro}</p>
                        <h3>${question.question}</h3>
                        
                        ${gameState.showHint ? `
                            <div class="hint-box">
                                <p><strong>ğŸ’¡ Tipp:</strong> ${question.hint}</p>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">(Du erhÃ¤ltst nur 75 Punkte statt 100)</p>
                            </div>
                        ` : `
                            <button onclick="showHint()" class="hint-button" style="margin-top: 1rem;">
                                ğŸ’¡ Tipp anzeigen (-25 Punkte)
                            </button>
                        `}
                    </div>

                    <div class="card">
                        <h3>WÃ¤hle deine Antwort:</h3>
                        <div class="options-grid">
                            ${shuffledOptions.map(option => `
                                <div class="option-button" onclick="selectAnswer('${option.country}')">
                                    <div class="option-flag">${option.flag}</div>
                                    <div class="option-name">${option.country}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
            `;
        }

        function renderResult(isCorrect) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            
            return `
                <div class="modal">
                    <div class="modal-content ${isCorrect ? 'celebration' : ''}">
                        <div class="modal-icon">${isCorrect ? 'ğŸ‰' : 'ğŸ˜…'}</div>
                        <h2 class="modal-title" style="color: ${isCorrect ? '#10b981' : '#f59e0b'};">
                            ${isCorrect ? 'Richtig!' : 'Leider falsch!'}
                        </h2>
                        
                        ${isCorrect ? `
                            <div style="text-align: center; font-size: 2rem; font-weight: bold; color: #10b981; margin: 1rem 0;">
                                +${gameState.usedHint ? '75' : '100'} Punkte!
                            </div>
                        ` : `
                            <div style="text-align: center; color: #666; margin: 1rem 0;">
                                Die richtige Antwort war: <strong>${question.correctAnswer}</strong>
                            </div>
                            <div style="text-align: center; font-size: 1.5rem; color: #ef4444; margin: 1rem 0;">
                                -1 Leben â¤ï¸
                            </div>
                        `}

                        <div class="fact-box">
                            <p style="font-weight: bold; margin-bottom: 0.75rem; color: #1e3a8a;">ğŸ’¡ Wusstest du?</p>
                            <p>${question.fact}</p>
                        </div>

                        ${gameState.currentStep < product.questions.length - 1 ? `
                            <button onclick="nextQuestion()" class="action-button" style="width: 100%; margin-top: 1.5rem;">
                                Weiter zum nÃ¤chsten Schritt â†’
                            </button>
                        ` : `
                            <button onclick="finishProduct()" class="action-button" style="width: 100%; margin-top: 1.5rem;">
                                Reise abschlieÃŸen ğŸŠ
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function renderSummary() {
            const product = products[gameState.currentProduct];
            
            return `
                <header>
                    <h1>ğŸ—ºï¸ Die Reise deines ${product.name}</h1>
                </header>

                <main class="slide-in">
                    <div class="card">
                        <h2 style="text-align: center; margin-bottom: 2rem;">Die Weltreise im Ãœberblick</h2>
                        
                        <div style="position: relative;">
                            ${product.journey.map((station, idx) => `
                                <div style="display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem; padding: 1.5rem; background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border-radius: 15px; ${idx === product.journey.length - 1 ? '' : 'border-left: 3px solid #10b981;'}">
                                    <div style="font-size: 3rem; flex-shrink: 0;">
                                        ${station.icon}
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: bold; color: #1e3a8a; font-size: 1.2rem; margin-bottom: 0.25rem;">
                                            Schritt ${station.step}: ${station.location}
                                        </div>
                                        <div style="color: #666;">
                                            ${station.description}
                                        </div>
                                    </div>
                                    ${idx < product.journey.length - 1 ? `
                                        <div style="position: absolute; left: 2.8rem; top: ${idx * 120 + 80}px; width: 3px; height: 40px; background: #10b981;"></div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">ğŸ“Š Zusammenfassung</h3>
                        <div style="font-size: 1.5rem; color: #1e3a8a; margin: 1rem 0;">
                            <strong>${product.totalDistance}</strong> zurÃ¼ckgelegt
                        </div>
                        <div style="font-size: 1.2rem; color: #1e40af;">
                            Ãœber <strong>${product.journey.length}</strong> verschiedene Stationen
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button onclick="showFinalResult()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            Weiter zur Auswertung â†’
                        </button>
                    </div>
                </main>
            `;
        }

        function renderFinal() {
            const product = products[gameState.currentProduct];
            const totalQuestions = product.questions.length;
            const percentage = Math.round((gameState.correctInRound / totalQuestions) * 100);
            
            return `
                <header>
                    <h1>ğŸ† ${product.icon} ${product.name} abgeschlossen!</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">â† ZurÃ¼ck zum MenÃ¼</a>
                </header>

                <main class="slide-in">
                    <div class="card celebration">
                        <div style="text-align: center; font-size: 5rem; margin-bottom: 1.5rem;">ğŸ‰</div>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">Punkte</div>
                                <div class="info-value">${gameState.score}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Richtig</div>
                                <div class="info-value">${gameState.correctInRound}/${totalQuestions}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Genauigkeit</div>
                                <div class="info-value">${percentage}%</div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; text-align: center;">
                            <div style="font-size: 1.2rem; color: #1e3a8a;">
                                Gesamte Distanz: <strong>${product.totalDistance}</strong>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
                        <h3 style="color: #92400e; margin-bottom: 1rem;">âœ¨ Interessanter Fakt</h3>
                        <p style="color: #78350f; font-size: 1.1rem;">${product.funFact}</p>
                    </div>

                    ${percentage === 100 ? `
                        <div class="card" style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); text-align: center;">
                            <h3 style="color: #047857; font-size: 2rem; margin-bottom: 0.5rem;">ğŸŒŸ Perfekt!</h3>
                            <p style="color: #065f46;">Du bist ein Globalisierungs-Experte!</p>
                        </div>
                    ` : percentage >= 66 ? `
                        <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                            <h3 style="color: #1e40af; font-size: 2rem; margin-bottom: 0.5rem;">ğŸ‘ Super!</h3>
                            <p style="color: #1e3a8a;">Sehr gut! Du kennst dich schon gut aus!</p>
                        </div>
                    ` : `
                        <div class="card" style="background: linear-gradient(135deg, #e9d5ff, #d8b4fe); text-align: center;">
                            <h3 style="color: #7c3aed; font-size: 2rem; margin-bottom: 0.5rem;">ğŸ’ª Weiter so!</h3>
                            <p style="color: #6b21a8;">Guter Start! Probiere weitere Produkte aus!</p>
                        </div>
                    `}

                    <div style="text-align: center;">
                        <button onclick="backToMenu()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            NÃ¤chstes Produkt erkunden ğŸš€
                        </button>
                    </div>
                </main>
            `;
        }

        function startProduct(productKey) {
            gameState.currentProduct = productKey;
            gameState.currentStep = 0;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            gameState.correctInRound = 0;
            
            // Shuffle options for each question
            const product = products[productKey];
            gameState.shuffledOptions = product.questions.map(q => shuffleArray(q.options));
            
            render();
        }

        function selectAnswer(answer) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const isCorrect = answer === question.correctAnswer;
            
            if (isCorrect) {
                gameState.score += gameState.usedHint ? 75 : 100;
                gameState.correctInRound++;
            } else {
                gameState.lives--;
                if (gameState.lives <= 0) {
                    alert('Game Over! ğŸ˜¢ Du hast keine Leben mehr.\n\nDein finaler Score: ' + gameState.score + ' Punkte');
                    resetGame();
                    return;
                }
            }
            
            gameState.gameMode = 'result';
            gameState.lastAnswerCorrect = isCorrect;
            render();
        }

        function showHint() {
            gameState.showHint = true;
            gameState.usedHint = true;
            render();
        }

        function nextQuestion() {
            gameState.currentStep++;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            render();
        }

        function finishProduct() {
            gameState.gameMode = 'summary';
            render();
        }

        function showFinalResult() {
            gameState.gameMode = 'final';
            render();
        }

        function backToMenu() {
            gameState.gameMode = 'menu';
            gameState.currentProduct = null;
            render();
        }

        function resetGame() {
            gameState = {
                currentProduct: null,
                currentStep: 0,
                score: 0,
                lives: 3,
                correctInRound: 0,
                gameMode: 'menu',
                showHint: false,
                usedHint: false,
                shuffledOptions: []
            };
            render();
        }

        function render() {
            const app = document.getElementById('app');
            
            if (gameState.gameMode === 'menu') {
                app.innerHTML = renderMenu();
            } else if (gameState.gameMode === 'playing') {
                app.innerHTML = renderGame();
            } else if (gameState.gameMode === 'result') {
                const gameHTML = renderGame();
                const resultHTML = renderResult(gameState.lastAnswerCorrect);
                app.innerHTML = gameHTML + resultHTML;
            } else if (gameState.gameMode === 'summary') {
                app.innerHTML = renderSummary();
            } else if (gameState.gameMode === 'final') {
                app.innerHTML = renderFinal();
            }
        }

        // Initial render
        render();
    </script>
</body>
</html>
