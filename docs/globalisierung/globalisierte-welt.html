<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weltreise von Alltagsgegenständen</title>
    
    <!-- Twemoji für einheitliche Emoji-Darstellung auf allen Geräten -->
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
            background: linear-gradient(135deg, #1e3a8a 0%, #0ea5e9 100%);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cdefs%3E%3CradialGradient id='globe' cx='50%25' cy='40%25'%3E%3Cstop offset='0%25' style='stop-color:%234a90e2;stop-opacity:1' /%3E%3Cstop offset='70%25' style='stop-color:%232c5aa0;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%231a3a6b;stop-opacity:1' /%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='400' cy='400' r='300' fill='url(%23globe)' opacity='0.3'/%3E%3Cg fill='%2334d399' opacity='0.4'%3E%3Cpath d='M 400 300 Q 420 310 425 340 Q 430 370 420 400 Q 410 430 400 450 Q 390 430 385 400 Q 380 360 390 330 Q 395 310 400 300 Z'/%3E%3Cpath d='M 380 260 Q 390 255 400 260 Q 410 265 415 275 Q 410 285 400 285 Q 390 285 385 280 Q 378 272 380 260 Z'/%3E%3Cpath d='M 430 250 Q 470 260 500 280 Q 520 300 530 330 Q 535 360 525 390 Q 515 410 500 420 Q 480 410 465 395 Q 450 375 445 350 Q 440 320 445 290 Q 440 270 430 250 Z'/%3E%3Cpath d='M 280 250 Q 300 240 320 245 Q 340 255 350 275 Q 355 300 345 325 Q 335 345 320 355 Q 305 350 295 335 Q 285 315 280 290 Q 275 270 280 250 Z'/%3E%3Cpath d='M 320 370 Q 330 365 340 375 Q 345 395 340 420 Q 335 450 325 475 Q 315 485 310 475 Q 305 455 308 430 Q 312 400 315 385 Q 318 375 320 370 Z'/%3E%3Cpath d='M 520 480 Q 540 475 555 485 Q 565 500 560 515 Q 550 525 535 522 Q 520 515 515 500 Q 513 487 520 480 Z'/%3E%3C/g%3E%3Cg stroke='%23ffffff' stroke-width='1' fill='none' opacity='0.15'%3E%3Cellipse cx='400' cy='400' rx='300' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='240'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='180'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='120'/%3E%3Cellipse cx='400' cy='400' rx='300' ry='60'/%3E%3Cellipse cx='400' cy='400' rx='240' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='180' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='120' ry='300'/%3E%3Cellipse cx='400' cy='400' rx='60' ry='300'/%3E%3Cline x1='400' y1='100' x2='400' y2='700'/%3E%3Cline x1='100' y1='400' x2='700' y2='400'/%3E%3C/g%3E%3C/svg%3E");
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.15;
            z-index: -1;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2.5rem;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            color: #666;
        }

        .back-link {
            display: inline-block;
            margin: 1rem 0 0 0;
            color: #0ea5e9;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        main {
            flex: 1;
            max-width: 1000px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 1rem 2rem 1rem;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .card h2 {
            color: #1e3a8a;
            margin-bottom: 1rem;
        }

        .card h3 {
            color: #1e3a8a;
            margin-bottom: 0.75rem;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .product-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .product-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .product-info {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }

        .progress-bar-container {
            background: #e5e7eb;
            height: 10px;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: bold;
            color: #1e3a8a;
        }

        .question-card {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
        }

        .question-card h3 {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .hint-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .hint-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        .hint-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .option-button {
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid #e5e7eb;
            padding: 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .option-button:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.2);
        }

        .option-flag {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            line-height: 1;
        }

        /* Twemoji-Bilder richtig anzeigen */
        .option-flag img.emoji {
            height: 3rem;
            width: 3rem;
            vertical-align: middle;
        }

        .option-name {
            font-weight: bold;
            color: #1e3a8a;
            font-size: 1.1rem;
        }

        .action-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 2rem;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-icon {
            font-size: 5rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .modal-title {
            color: #1e3a8a;
            font-size: 2rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .fact-box {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .fact-box p {
            color: #1e3a8a;
            line-height: 1.6;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .info-item {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .tips-box {
            background: #dcfce7;
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
        }

        .tips-box h4 {
            color: #059669;
            margin-bottom: 0.75rem;
        }

        .tips-box ul {
            list-style: none;
            padding: 0;
        }

        .tips-box li {
            color: #166534;
            padding: 0.5rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        .celebration {
            animation: pulse 1s ease-in-out;
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Twemoji global styling */
        img.emoji {
            height: 1em;
            width: 1em;
            margin: 0 .05em 0 .1em;
            vertical-align: -0.1em;
        }

        .journey-steps {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .journey-step {
            background: rgba(255, 255, 255, 0.95);
            padding: 1.25rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .journey-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
        }

        .journey-content {
            flex: 1;
        }

        .journey-location {
            font-weight: bold;
            color: #1e3a8a;
            font-size: 1.1rem;
        }

        .journey-description {
            color: #666;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Hilfsfunktion um Array zu mischen
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        let gameState = {
            currentProduct: null,
            currentStep: 0,
            score: 0,
            lives: 3,
            correctInRound: 0,
            gameMode: 'menu',
            showHint: false,
            usedHint: false,
            shuffledOptions: []
        };

        const products = {
            tshirt: {
                name: 'T-Shirt',
                icon: '👕',
                color: '#3B82F6',
                gradient: 'from-blue-500 to-blue-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '🌱 Schritt 1: Rohstoffe',
                        intro: 'Um ein T-Shirt herzustellen, braucht es Baumwolle, die von der Baumwollpflanze stammt.',
                        question: 'Wo wird die Baumwolle für dein T-Shirt hauptsächlich angebaut?',
                        options: [
                            { country: 'Indien', flag: '🇮🇳', correct: true },
                            { country: 'Schweiz', flag: '🇨🇭', correct: false },
                            { country: 'Deutschland', flag: '🇩🇪', correct: false },
                            { country: 'Kanada', flag: '🇨🇦', correct: false }
                        ],
                        correctAnswer: 'Indien',
                        fact: 'Indien ist der zweitgrößte Baumwollproduzent der Welt! Ein einziges T-Shirt benötigt etwa 2.700 Liter Wasser beim Anbau.',
                        hint: 'Dieses Land in Südasien ist bekannt für seine große Textilproduktion.'
                    },
                    {
                        step: 2,
                        stepTitle: '🧵 Schritt 2: Spinnen & Weben',
                        intro: 'Die geerntete Baumwolle muss nun zu Garn gesponnen und dann zu Stoff gewebt werden.',
                        question: 'In welchem Land wird die Baumwolle zu Garn gesponnen und zu Stoff gewebt?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Italien', flag: '🇮🇹', correct: false },
                            { country: 'USA', flag: '🇺🇸', correct: false },
                            { country: 'Brasilien', flag: '🇧🇷', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China ist die weltgrößte Textilindustrie und verarbeitet Baumwolle aus der ganzen Welt zu Stoffen.',
                        hint: 'Die „Werkbank der Welt" in Ostasien.'
                    },
                    {
                        step: 3,
                        stepTitle: '🎨 Schritt 3: Färben & Veredeln',
                        intro: 'Der rohe, weiße Stoff wird nun gefärbt und chemisch behandelt, um ihm Farbe und besondere Eigenschaften zu geben.',
                        question: 'Wo wird der Stoff oft gefärbt und chemisch behandelt?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Norwegen', flag: '🇳🇴', correct: false },
                            { country: 'Australien', flag: '🇦🇺', correct: false },
                            { country: 'Argentinien', flag: '🇦🇷', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'Beim Färben werden oft große Mengen Wasser und Chemikalien verwendet. Dies kann die Umwelt stark belasten.',
                        hint: 'Oft im gleichen Land wie das Weben - effizient für kurze Transportwege.'
                    },
                    {
                        step: 4,
                        stepTitle: '✂️ Schritt 4: Nähen',
                        intro: 'Der gefärbte Stoff wird nun zugeschnitten und zu fertigen T-Shirts zusammengenäht.',
                        question: 'In welchem Land werden viele T-Shirts zusammengenäht?',
                        options: [
                            { country: 'Bangladesh', flag: '🇧🇩', correct: true },
                            { country: 'Finnland', flag: '🇫🇮', correct: false },
                            { country: 'Mexiko', flag: '🇲🇽', correct: false },
                            { country: 'Japan', flag: '🇯🇵', correct: false }
                        ],
                        correctAnswer: 'Bangladesh',
                        fact: 'Bangladesh ist eines der größten Textilproduktionsländer. Tausende Menschen arbeiten in Nähereien – oft unter schwierigen Bedingungen.',
                        hint: 'Ein südasiatisches Land, Nachbar von Indien, bekannt für günstige Textilproduktion.'
                    },
                    {
                        step: 5,
                        stepTitle: '🚢 Schritt 5: Transport',
                        intro: 'Das fertige T-Shirt muss nun von Asien in die Schweiz transportiert werden.',
                        question: 'Wie kommt dein T-Shirt in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', flag: '🚢', correct: true },
                            { country: 'Flugzeug', flag: '✈️', correct: false },
                            { country: 'Zug', flag: '🚂', correct: false },
                            { country: 'LKW direkt', flag: '🚛', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Dein T-Shirt reist etwa 15.000 km auf einem Containerschiff über den Ozean. Die Reise dauert 4-6 Wochen!',
                        hint: 'Der günstigste und umweltfreundlichste Weg für lange Distanzen.'
                    },
                    {
                        step: 6,
                        stepTitle: '🏪 Schritt 6: Verkauf',
                        intro: 'Nach der langen Reise ist das T-Shirt endlich in Europa angekommen.',
                        question: 'Wo kaufst du dein T-Shirt schließlich?',
                        options: [
                            { country: 'Geschäft in der Schweiz', flag: '🇨🇭', correct: true },
                            { country: 'Direkt in China', flag: '🇨🇳', correct: false },
                            { country: 'Online aus Indien', flag: '🇮🇳', correct: false },
                            { country: 'Im Hafen', flag: '⚓', correct: false }
                        ],
                        correctAnswer: 'Geschäft in der Schweiz',
                        fact: 'Nach seiner Weltreise von über 15.000 km landet dein T-Shirt endlich im Schweizer Laden. Es wurde von über 20 verschiedenen Händen berührt!',
                        hint: 'Am Ende der Reise – dort wo du lebst!'
                    }
                ],
                totalDistance: '~15.000 km',
                funFact: 'Ein durchschnittliches T-Shirt reist weiter als die meisten Menschen in einem Jahr!',
                journey: [
                    { step: 1, location: 'Indien', flag: '🇮🇳', description: 'Baumwollanbau' },
                    { step: 2, location: 'China', flag: '🇨🇳', description: 'Spinnen & Weben' },
                    { step: 3, location: 'China', flag: '🇨🇳', description: 'Färben' },
                    { step: 4, location: 'Bangladesh', flag: '🇧🇩', description: 'Nähen' },
                    { step: 5, location: 'Ozean', flag: '🚢', description: 'Transport' },
                    { step: 6, location: 'Schweiz', flag: '🇨🇭', description: 'Verkauf' }
                ]
            },
            smartphone: {
                name: 'Smartphone',
                icon: '📱',
                color: '#8B5CF6',
                gradient: 'from-purple-500 to-purple-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '⛏️ Schritt 1: Rohstoffabbau',
                        intro: 'Ein Smartphone besteht aus über 60 verschiedenen Materialien. Für die Elektronik werden seltene Erden und Coltan benötigt.',
                        question: 'Wo werden seltene Erden und Coltan für dein Smartphone abgebaut?',
                        options: [
                            { country: 'Kongo', flag: '🇨🇩', correct: true },
                            { country: 'Grönland', flag: '🇬🇱', correct: false },
                            { country: 'Island', flag: '🇮🇸', correct: false },
                            { country: 'Neuseeland', flag: '🇳🇿', correct: false }
                        ],
                        correctAnswer: 'Kongo',
                        fact: 'Der Kongo besitzt 80% der weltweiten Coltan-Reserven! Über 60 verschiedene Materialien werden für ein Smartphone benötigt.',
                        hint: 'Ein zentralafrikanisches Land mit reichen Bodenschätzen.'
                    },
                    {
                        step: 2,
                        stepTitle: '💾 Schritt 2: Chip-Produktion',
                        intro: 'Das Herzstück eines Smartphones sind die Mikrochips. Diese winzigen, aber extrem komplexen Bauteile werden in High-Tech-Fabriken hergestellt.',
                        question: 'Wo werden die komplexen Mikrochips hergestellt?',
                        options: [
                            { country: 'Taiwan', flag: '🇹🇼', correct: true },
                            { country: 'Portugal', flag: '🇵🇹', correct: false },
                            { country: 'Ägypten', flag: '🇪🇬', correct: false },
                            { country: 'Peru', flag: '🇵🇪', correct: false }
                        ],
                        correctAnswer: 'Taiwan',
                        fact: 'Taiwan produziert über 60% der weltweiten Mikrochips! Eine einzige Chip-Fabrik kostet mehrere Milliarden Dollar zu bauen.',
                        hint: 'Eine Insel vor der Küste Chinas, Weltmarktführer in der Halbleiterproduktion.'
                    },
                    {
                        step: 3,
                        stepTitle: '📱 Schritt 3: Display-Herstellung',
                        intro: 'Das Display ist eines der teuersten und aufwendigsten Teile eines Smartphones. Es wird in spezialisierten Fabriken gefertigt.',
                        question: 'Wo werden die hochauflösenden Displays produziert?',
                        options: [
                            { country: 'Südkorea', flag: '🇰🇷', correct: true },
                            { country: 'Polen', flag: '🇵🇱', correct: false },
                            { country: 'Türkei', flag: '🇹🇷', correct: false },
                            { country: 'Chile', flag: '🇨🇱', correct: false }
                        ],
                        correctAnswer: 'Südkorea',
                        fact: 'Südkorea und Japan sind führend in der Display-Technologie. Ein modernes Display hat mehr Pixel als das menschliche Auge unterscheiden kann!',
                        hint: 'Bekannt für Technologie-Giganten wie Samsung und LG.'
                    },
                    {
                        step: 4,
                        stepTitle: '🔧 Schritt 4: Zusammenbau',
                        intro: 'Alle Einzelteile - Chips, Display, Kamera, Batterie und hunderte weitere Komponenten - werden nun zusammengesetzt.',
                        question: 'Wo werden die Smartphones zusammengesetzt?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Finnland', flag: '🇫🇮', correct: false },
                            { country: 'Spanien', flag: '🇪🇸', correct: false },
                            { country: 'Südafrika', flag: '🇿🇦', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'In riesigen Fabriken in China werden täglich Millionen Smartphones zusammengebaut. Die Arbeiter müssen tausende kleine Teile präzise verbauen.',
                        hint: 'Die größte Elektronikmontage-Industrie der Welt.'
                    },
                    {
                        step: 5,
                        stepTitle: '📦 Schritt 5: Verpackung & Versand',
                        intro: 'Das fertige Smartphone wird verpackt und für den weltweiten Versand vorbereitet.',
                        question: 'Wie kommt dein Smartphone von China in die Schweiz?',
                        options: [
                            { country: 'Flugzeug', flag: '✈️', correct: true },
                            { country: 'Schiff', flag: '🚢', correct: false },
                            { country: 'Zug', flag: '🚂', correct: false },
                            { country: 'Auto', flag: '🚗', correct: false }
                        ],
                        correctAnswer: 'Flugzeug',
                        fact: 'Wegen des hohen Werts und der Nachfrage werden Smartphones meist per Flugzeug transportiert - schnell, aber nicht sehr umweltfreundlich!',
                        hint: 'Der schnellste, aber teuerste und umweltschädlichste Transportweg.'
                    },
                    {
                        step: 6,
                        stepTitle: '🏪 Schritt 6: Verkauf',
                        intro: 'Nach seiner Reise um die halbe Welt ist dein Smartphone endlich verfügbar.',
                        question: 'Wo kaufst du dein Smartphone schließlich?',
                        options: [
                            { country: 'Schweizer Elektronikladen', flag: '🇨🇭', correct: true },
                            { country: 'Direkt in China', flag: '🇨🇳', correct: false },
                            { country: 'In Taiwan', flag: '🇹🇼', correct: false },
                            { country: 'Am Flughafen', flag: '✈️', correct: false }
                        ],
                        correctAnswer: 'Schweizer Elektronikladen',
                        fact: 'Dein Smartphone hat eine Reise von über 10.000 km hinter sich und wurde in mindestens 5 verschiedenen Ländern verarbeitet!',
                        hint: 'Am Ende der Reise – in deinem Heimatland!'
                    }
                ],
                totalDistance: '~10.000 km',
                funFact: 'Ein Smartphone enthält mehr Rechenleistung als alle Computer, die die Apollo 11 zum Mond gebracht haben!',
                journey: [
                    { step: 1, location: 'Kongo', flag: '🇨🇩', description: 'Rohstoffabbau' },
                    { step: 2, location: 'Taiwan', flag: '🇹🇼', description: 'Chip-Produktion' },
                    { step: 3, location: 'Südkorea', flag: '🇰🇷', description: 'Display' },
                    { step: 4, location: 'China', flag: '🇨🇳', description: 'Zusammenbau' },
                    { step: 5, location: 'Luft', flag: '✈️', description: 'Transport' },
                    { step: 6, location: 'Schweiz', flag: '🇨🇭', description: 'Verkauf' }
                ]
            },
            sneaker: {
                name: 'Sneaker',
                icon: '👟',
                color: '#EF4444',
                gradient: 'from-red-500 to-red-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '🧪 Schritt 1: Gummi & Kunststoffe',
                        intro: 'Moderne Sneaker bestehen hauptsächlich aus synthetischen Materialien und Gummi.',
                        question: 'Wo werden die Kunststoffe und Gummisohlen für Sneaker hergestellt?',
                        options: [
                            { country: 'Malaysia', flag: '🇲🇾', correct: true },
                            { country: 'Schweiz', flag: '🇨🇭', correct: false },
                            { country: 'Frankreich', flag: '🇫🇷', correct: false },
                            { country: 'Russland', flag: '🇷🇺', correct: false }
                        ],
                        correctAnswer: 'Malaysia',
                        fact: 'Malaysia ist einer der größten Gummiproduzenten der Welt. Ein Paar Sneaker enthält über 65 verschiedene Teile!',
                        hint: 'Ein südostasiatisches Land, bekannt für Gummi- und Kunststoffproduktion.'
                    },
                    {
                        step: 2,
                        stepTitle: '🧵 Schritt 2: Obermaterial',
                        intro: 'Das Obermaterial (Upper) ist der sichtbare Teil des Schuhs und besteht aus verschiedenen Textilien und Kunstleder.',
                        question: 'Wo wird das Obermaterial für Sneaker produziert?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Schweden', flag: '🇸🇪', correct: false },
                            { country: 'Kanada', flag: '🇨🇦', correct: false },
                            { country: 'Belgien', flag: '🇧🇪', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert über 60% aller Schuhmaterialien weltweit. Moderne Sneaker verwenden oft recycelte Plastikflaschen!',
                        hint: 'Die weltgrößte Textil- und Schuhindustrie.'
                    },
                    {
                        step: 3,
                        stepTitle: '⚙️ Schritt 3: Dämpfung & Technologie',
                        intro: 'Moderne Sneaker haben High-Tech-Dämpfungssysteme für Komfort und Performance.',
                        question: 'Wo werden die speziellen Dämpfungselemente entwickelt und hergestellt?',
                        options: [
                            { country: 'Vietnam', flag: '🇻🇳', correct: true },
                            { country: 'Österreich', flag: '🇦🇹', correct: false },
                            { country: 'Dänemark', flag: '🇩🇰', correct: false },
                            { country: 'Irland', flag: '🇮🇪', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Vietnam hat sich auf High-Tech-Schuhkomponenten spezialisiert. Die Dämpfung in Sneakern kann bis zu 80% der Aufprallenergie absorbieren!',
                        hint: 'Ein südostasiatisches Land, das sich auf Schuh-Technologie spezialisiert hat.'
                    },
                    {
                        step: 4,
                        stepTitle: '✂️ Schritt 4: Schneiden & Vorbereitung',
                        intro: 'Alle Materialien werden präzise zugeschnitten und für die Montage vorbereitet.',
                        question: 'Wo werden die Materialien zugeschnitten und vorbereitet?',
                        options: [
                            { country: 'Indonesien', flag: '🇮🇩', correct: true },
                            { country: 'Niederlande', flag: '🇳🇱', correct: false },
                            { country: 'Griechenland', flag: '🇬🇷', correct: false },
                            { country: 'Tschechien', flag: '🇨🇿', correct: false }
                        ],
                        correctAnswer: 'Indonesien',
                        fact: 'Indonesien ist einer der größten Schuhproduzenten. Jeder Sneaker besteht aus durchschnittlich 65 Einzelteilen, die präzise geschnitten werden müssen!',
                        hint: 'Ein Inselstaat in Südostasien mit großer Schuhindustrie.'
                    },
                    {
                        step: 5,
                        stepTitle: '🏭 Schritt 5: Zusammenbau',
                        intro: 'Nun werden alle Teile des Sneakers zusammengefügt - ein komplexer Prozess mit vielen Handarbeitsschritten.',
                        question: 'Wo werden die Sneaker zusammengebaut?',
                        options: [
                            { country: 'Vietnam', flag: '🇻🇳', correct: true },
                            { country: 'Italien', flag: '🇮🇹', correct: false },
                            { country: 'USA', flag: '🇺🇸', correct: false },
                            { country: 'Ungarn', flag: '🇭🇺', correct: false }
                        ],
                        correctAnswer: 'Vietnam',
                        fact: 'Vietnam produziert über 1 Milliarde Paar Schuhe pro Jahr! Ein Arbeiter benötigt etwa 3 Stunden, um einen High-End-Sneaker zusammenzubauen.',
                        hint: 'Einer der größten Schuh-Exporteure der Welt in Südostasien.'
                    },
                    {
                        step: 6,
                        stepTitle: '🚢 Schritt 6: Versand & Verkauf',
                        intro: 'Die fertigen Sneaker werden verpackt und in die Schweiz verschifft.',
                        question: 'Wie kommen deine Sneaker in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', flag: '🚢', correct: true },
                            { country: 'Flugzeug', flag: '✈️', correct: false },
                            { country: 'Zug durch Asien', flag: '🚂', correct: false },
                            { country: 'LKW', flag: '🚛', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Deine Sneaker reisen etwa 12.000 km auf dem Seeweg! Ein Container kann bis zu 10.000 Paar Schuhe transportieren.',
                        hint: 'Der günstigste Transportweg für große Mengen über weite Distanzen.'
                    }
                ],
                totalDistance: '~12.000 km',
                funFact: 'Ein Paar Sneaker hat mehr Länder besucht als die meisten Menschen! Und die Produktion verursacht etwa 14 kg CO2.',
                journey: [
                    { step: 1, location: 'Malaysia', flag: '🇲🇾', description: 'Gummi & Kunststoff' },
                    { step: 2, location: 'China', flag: '🇨🇳', description: 'Obermaterial' },
                    { step: 3, location: 'Vietnam', flag: '🇻🇳', description: 'Dämpfung' },
                    { step: 4, location: 'Indonesien', flag: '🇮🇩', description: 'Zuschnitt' },
                    { step: 5, location: 'Vietnam', flag: '🇻🇳', description: 'Zusammenbau' },
                    { step: 6, location: 'Schweiz', flag: '🇨🇭', description: 'Verkauf' }
                ]
            },
            escooter: {
                name: 'E-Scooter',
                icon: '🛴',
                color: '#F59E0B',
                gradient: 'from-amber-500 to-amber-600',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '⚡ Schritt 1: Lithium-Abbau',
                        intro: 'Für die Batterie eines E-Scooters wird Lithium benötigt, ein wertvolles Metall für Akkus.',
                        question: 'Wo wird das Lithium für die E-Scooter-Batterie hauptsächlich abgebaut?',
                        options: [
                            { country: 'Chile', flag: '🇨🇱', correct: true },
                            { country: 'Schweiz', flag: '🇨🇭', correct: false },
                            { country: 'Nigeria', flag: '🇳🇬', correct: false },
                            { country: 'Thailand', flag: '🇹🇭', correct: false }
                        ],
                        correctAnswer: 'Chile',
                        fact: 'Chile besitzt die größten Lithium-Reserven der Welt! Die riesigen Salzseen in der Atacama-Wüste liefern über 25% des weltweiten Lithiums.',
                        hint: 'Ein südamerikanisches Land mit großen Salzwüsten und Lithium-Vorkommen.'
                    },
                    {
                        step: 2,
                        stepTitle: '🔋 Schritt 2: Batterie-Produktion',
                        intro: 'Aus dem Lithium werden nun leistungsstarke Lithium-Ionen-Akkus hergestellt.',
                        question: 'Wo werden die meisten E-Scooter-Batterien produziert?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Schweden', flag: '🇸🇪', correct: false },
                            { country: 'Indien', flag: '🇮🇳', correct: false },
                            { country: 'Brasilien', flag: '🇧🇷', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert über 70% aller Lithium-Ionen-Batterien weltweit! Eine E-Scooter-Batterie kann bis zu 1000 Mal aufgeladen werden.',
                        hint: 'Das Land, das die meisten Elektrofahrzeuge und Batterien produziert.'
                    },
                    {
                        step: 3,
                        stepTitle: '⚙️ Schritt 3: Motor & Elektronik',
                        intro: 'Der Elektromotor und die Steuerungselektronik sind das Herzstück des E-Scooters.',
                        question: 'Wo werden die Elektromotoren für E-Scooter hergestellt?',
                        options: [
                            { country: 'Japan', flag: '🇯🇵', correct: true },
                            { country: 'Marokko', flag: '🇲🇦', correct: false },
                            { country: 'Argentinien', flag: '🇦🇷', correct: false },
                            { country: 'Norwegen', flag: '🇳🇴', correct: false }
                        ],
                        correctAnswer: 'Japan',
                        fact: 'Japan ist führend in der Elektromotor-Technologie! Die Motoren sind so effizient, dass über 90% der Energie in Bewegung umgewandelt wird.',
                        hint: 'Ein ostasiatisches Land, bekannt für Hightech-Elektronik und Präzisionstechnik.'
                    },
                    {
                        step: 4,
                        stepTitle: '🔩 Schritt 4: Rahmen & Teile',
                        intro: 'Der Aluminiumrahmen und alle mechanischen Teile wie Bremsen, Räder und Lenkung werden gefertigt.',
                        question: 'Wo werden Rahmen und mechanische Teile produziert?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Australien', flag: '🇦🇺', correct: false },
                            { country: 'Mexiko', flag: '🇲🇽', correct: false },
                            { country: 'Finnland', flag: '🇫🇮', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China ist Weltmarktführer in der Aluminium-Verarbeitung! Ein E-Scooter besteht aus über 200 Einzelteilen.',
                        hint: 'Das Land mit der größten Aluminium- und Metallverarbeitungsindustrie.'
                    },
                    {
                        step: 5,
                        stepTitle: '🏭 Schritt 5: Zusammenbau',
                        intro: 'Alle Komponenten - Batterie, Motor, Rahmen und Elektronik - werden nun zum fertigen E-Scooter montiert.',
                        question: 'Wo werden E-Scooter zusammengebaut?',
                        options: [
                            { country: 'China', flag: '🇨🇳', correct: true },
                            { country: 'Deutschland', flag: '🇩🇪', correct: false },
                            { country: 'USA', flag: '🇺🇸', correct: false },
                            { country: 'Südkorea', flag: '🇰🇷', correct: false }
                        ],
                        correctAnswer: 'China',
                        fact: 'China produziert über 90% aller E-Scooter weltweit! In den Fabriken werden täglich zehntausende E-Scooter montiert.',
                        hint: 'Das gleiche Land, wo die meisten Komponenten hergestellt werden - effizient für die Logistik.'
                    },
                    {
                        step: 6,
                        stepTitle: '🚢 Schritt 6: Transport & Verkauf',
                        intro: 'Die fertigen E-Scooter werden verpackt und in die ganze Welt verschickt.',
                        question: 'Wie kommt dein E-Scooter in die Schweiz?',
                        options: [
                            { country: 'Containerschiff', flag: '🚢', correct: true },
                            { country: 'Flugzeug', flag: '✈️', correct: false },
                            { country: 'Zug', flag: '🚂', correct: false },
                            { country: 'E-Scooter fahren', flag: '🛴', correct: false }
                        ],
                        correctAnswer: 'Containerschiff',
                        fact: 'Dein E-Scooter reist etwa 18.000 km auf dem Seeweg! Die Reise dauert 5-6 Wochen bis nach Europa.',
                        hint: 'Der umweltfreundlichste Weg für schwere Güter über lange Distanzen.'
                    }
                ],
                totalDistance: '~18.000 km',
                funFact: 'Die Batterie eines E-Scooters ist das teuerste Teil - sie kostet etwa 30-40% des gesamten Preises!',
                journey: [
                    { step: 1, location: 'Chile', flag: '🇨🇱', description: 'Lithium-Abbau' },
                    { step: 2, location: 'China', flag: '🇨🇳', description: 'Batterie-Produktion' },
                    { step: 3, location: 'Japan', flag: '🇯🇵', description: 'Motor & Elektronik' },
                    { step: 4, location: 'China', flag: '🇨🇳', description: 'Rahmen & Teile' },
                    { step: 5, location: 'China', flag: '🇨🇳', description: 'Zusammenbau' },
                    { step: 6, location: 'Schweiz', flag: '🇨🇭', description: 'Verkauf' }
                ]
            },
            chocolate: {
                name: 'Schokolade',
                icon: '🍫',
                color: '#92400E',
                gradient: 'from-amber-800 to-amber-900',
                totalSteps: 6,
                questions: [
                    {
                        step: 1,
                        stepTitle: '🌴 Schritt 1: Kakao-Anbau',
                        intro: 'Schokolade beginnt mit Kakaobohnen, die auf Kakaobäumen in tropischen Regionen wachsen.',
                        question: 'Wo wird der Kakao für deine Schokolade hauptsächlich angebaut?',
                        options: [
                            { country: 'Elfenbeinküste', flag: '🇨🇮', correct: true },
                            { country: 'Schweiz', flag: '🇨🇭', correct: false },
                            { country: 'Island', flag: '🇮🇸', correct: false },
                            { country: 'Polen', flag: '🇵🇱', correct: false }
                        ],
                        correctAnswer: 'Elfenbeinküste',
                        fact: 'Die Elfenbeinküste produziert über 40% des weltweiten Kakaos! Ein Kakaobaum braucht 3-5 Jahre, bis er die ersten Früchte trägt.',
                        hint: 'Ein westafrikanisches Land am Atlantik, weltgrößter Kakao-Produzent.'
                    },
                    {
                        step: 2,
                        stepTitle: '🏭 Schritt 2: Kakao-Verarbeitung',
                        intro: 'Die Kakaobohnen werden fermentiert, getrocknet und dann zu Kakaomasse und Kakaobutter verarbeitet.',
                        question: 'Wo wird der Kakao zu Kakaomasse verarbeitet?',
                        options: [
                            { country: 'Niederlande', flag: '🇳🇱', correct: true },
                            { country: 'Kanada', flag: '🇨🇦', correct: false },
                            { country: 'Russland', flag: '🇷🇺', correct: false },
                            { country: 'Australien', flag: '🇦🇺', correct: false }
                        ],
                        correctAnswer: 'Niederlande',
                        fact: 'Die Niederlande sind der weltgrößte Kakao-Verarbeiter! In Amsterdam befindet sich der größte Kakaohafen Europas.',
                        hint: 'Ein europäisches Land mit großem Hafen, bekannt für internationalen Handel.'
                    },
                    {
                        step: 3,
                        stepTitle: '🌾 Schritt 3: Zucker',
                        intro: 'Für Schokolade braucht es Zucker, der aus Zuckerrohr oder Zuckerrüben gewonnen wird.',
                        question: 'Woher kommt der Zucker für deine Schokolade?',
                        options: [
                            { country: 'Brasilien', flag: '🇧🇷', correct: true },
                            { country: 'Norwegen', flag: '🇳🇴', correct: false },
                            { country: 'Südafrika', flag: '🇿🇦', correct: false },
                            { country: 'Japan', flag: '🇯🇵', correct: false }
                        ],
                        correctAnswer: 'Brasilien',
                        fact: 'Brasilien ist der weltgrößte Zuckerproduzent! Für 1 kg Schokolade werden etwa 500g Zucker benötigt.',
                        hint: 'Das größte Land Südamerikas, bekannt für Zuckerrohr-Plantagen.'
                    },
                    {
                        step: 4,
                        stepTitle: '🥛 Schritt 4: Milchpulver',
                        intro: 'Für Milchschokolade wird Milchpulver benötigt, das aus frischer Milch hergestellt wird.',
                        question: 'Woher kommt das Milchpulver für Schweizer Milchschokolade?',
                        options: [
                            { country: 'Neuseeland', flag: '🇳🇿', correct: true },
                            { country: 'Ägypten', flag: '🇪🇬', correct: false },
                            { country: 'Schweden', flag: '🇸🇪', correct: false },
                            { country: 'Türkei', flag: '🇹🇷', correct: false }
                        ],
                        correctAnswer: 'Neuseeland',
                        fact: 'Neuseeland ist weltweit führend in der Milchpulver-Produktion! Das Land hat mehr Kühe als Menschen.',
                        hint: 'Ein Inselstaat im Pazifik, bekannt für Milchwirtschaft und grüne Weiden.'
                    },
                    {
                        step: 5,
                        stepTitle: '🏔️ Schritt 5: Schokoladen-Herstellung',
                        intro: 'Nun werden alle Zutaten gemischt, conchiert und zu feiner Schokolade verarbeitet.',
                        question: 'Wo wird aus allen Zutaten die fertige Schokolade hergestellt?',
                        options: [
                            { country: 'Schweiz', flag: '🇨🇭', correct: true },
                            { country: 'China', flag: '🇨🇳', correct: false },
                            { country: 'Indien', flag: '🇮🇳', correct: false },
                            { country: 'Peru', flag: '🇵🇪', correct: false }
                        ],
                        correctAnswer: 'Schweiz',
                        fact: 'Die Schweiz ist weltberühmt für ihre Schokolade! Der Conchier-Prozess wurde hier erfunden und dauert bis zu 72 Stunden.',
                        hint: 'Das Land, wo du lebst - weltberühmt für Schokolade!'
                    },
                    {
                        step: 6,
                        stepTitle: '🏪 Schritt 6: Verpackung & Verkauf',
                        intro: 'Die fertige Schokolade wird verpackt und ist bereit für den Verkauf.',
                        question: 'Wo kaufst du deine Schweizer Schokolade?',
                        options: [
                            { country: 'Laden in der Schweiz', flag: '🇨🇭', correct: true },
                            { country: 'Elfenbeinküste', flag: '🇨🇮', correct: false },
                            { country: 'Niederlande', flag: '🇳🇱', correct: false },
                            { country: 'Brasilien', flag: '🇧🇷', correct: false }
                        ],
                        correctAnswer: 'Laden in der Schweiz',
                        fact: 'Schweizer essen durchschnittlich 11 kg Schokolade pro Jahr - Weltrekord! Deine Schokolade hat Zutaten von 4 Kontinenten.',
                        hint: 'Am Ende der Reise - direkt dort, wo die Schokolade produziert wurde!'
                    }
                ],
                totalDistance: '~25.000 km',
                funFact: 'Obwohl die Schokolade in der Schweiz hergestellt wird, reisen ihre Zutaten über 25.000 km - mehr als die halbe Welt!',
                journey: [
                    { step: 1, location: 'Elfenbeinküste', flag: '🇨🇮', description: 'Kakao-Anbau' },
                    { step: 2, location: 'Niederlande', flag: '🇳🇱', description: 'Kakao-Verarbeitung' },
                    { step: 3, location: 'Brasilien', flag: '🇧🇷', description: 'Zucker' },
                    { step: 4, location: 'Neuseeland', flag: '🇳🇿', description: 'Milchpulver' },
                    { step: 5, location: 'Schweiz', flag: '🇨🇭', description: 'Schokoladen-Produktion' },
                    { step: 6, location: 'Schweiz', flag: '🇨🇭', description: 'Verkauf' }
                ]
            }
        };

        function renderMenu() {
            return `
                <header>
                    <h1>🌍 Weltreise von Alltagsgegenständen</h1>
                    <a href="index.html" class="back-link">← Zurück zum Lernpfad</a>
                </header>

                <main class="slide-in">
                    <div class="card">
                        <h2>📋 Spielregeln</h2>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">1️⃣ Wähle</div>
                                <div class="info-value" style="font-size: 1rem;">Produkt</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">2️⃣ Beantworte</div>
                                <div class="info-value" style="font-size: 1rem;">Fragen</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">3️⃣ Sammle</div>
                                <div class="info-value" style="font-size: 1rem;">Punkte</div>
                            </div>
                        </div>
                        <p style="color: #666; line-height: 1.6;">
                            Folge der Supply Chain Schritt für Schritt von der Rohstoffgewinnung bis in den Schweizer Laden. 
                            Jede richtige Antwort bringt dir <strong>100 Punkte</strong>!
                        </p>
                    </div>

                    <div class="progress-card">
                        <div class="progress-info">
                            <div class="stat">
                                <span style="font-size: 1.5rem;">❤️</span>
                                <span>Leben: ${gameState.lives}</span>
                            </div>
                            <div class="stat">
                                <span style="font-size: 1.5rem;">⭐</span>
                                <span>Punkte: ${gameState.score}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Wähle ein Produkt:</h2>
                        <div class="product-grid">
                            ${Object.entries(products).map(([key, product]) => `
                                <div class="product-card" onclick="startProduct('${key}')">
                                    <div class="product-icon">${product.icon}</div>
                                    <div class="product-name">${product.name}</div>
                                    <div class="product-info">${product.totalSteps} Schritte</div>
                                    <div class="product-info" style="margin-top: 0.5rem;">
                                        <div>🌍 ${product.totalDistance}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
            `;
        }

        function renderGame() {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const shuffledOptions = gameState.shuffledOptions[gameState.currentStep];
            const progress = ((gameState.currentStep + 1) / product.questions.length) * 100;
            
            return `
                <header>
                    <h1>🌍 ${product.icon} ${product.name}</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">← Zurück zum Menü</a>
                </header>

                <main class="slide-in">
                    <div class="progress-card">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">Dein Fortschritt</h3>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-info">
                            <div style="color: #666;">Schritt ${gameState.currentStep + 1} von ${product.questions.length}</div>
                            <div class="stat">
                                <span>❤️</span>
                                <span>${'❤️'.repeat(gameState.lives)}</span>
                            </div>
                            <div class="stat">
                                <span>⭐</span>
                                <span>${gameState.score} Punkte</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-card">
                        <p style="font-size: 1.1rem; margin-bottom: 1rem; opacity: 0.95;">${question.intro}</p>
                        <h3>${question.question}</h3>
                        
                        ${gameState.showHint ? `
                            <div class="hint-box">
                                <p><strong>💡 Tipp:</strong> ${question.hint}</p>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">(Du erhältst nur 75 Punkte statt 100)</p>
                            </div>
                        ` : `
                            <button onclick="showHint()" class="hint-button" style="margin-top: 1rem;">
                                💡 Tipp anzeigen (-25 Punkte)
                            </button>
                        `}
                    </div>

                    <div class="card">
                        <h3>Wähle deine Antwort:</h3>
                        <div class="options-grid">
                            ${shuffledOptions.map(option => `
                                <div class="option-button" onclick="selectAnswer('${option.country}')">
                                    <div class="option-flag">${option.flag}</div>
                                    <div class="option-name">${option.country}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </main>
            `;
        }

        function renderResult(isCorrect) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            
            return `
                <div class="modal">
                    <div class="modal-content ${isCorrect ? 'celebration' : ''}">
                        <div class="modal-icon">${isCorrect ? '🎉' : '😅'}</div>
                        <h2 class="modal-title" style="color: ${isCorrect ? '#10b981' : '#f59e0b'};">
                            ${isCorrect ? 'Richtig!' : 'Leider falsch!'}
                        </h2>
                        
                        ${isCorrect ? `
                            <div style="text-align: center; font-size: 2rem; font-weight: bold; color: #10b981; margin: 1rem 0;">
                                +${gameState.usedHint ? '75' : '100'} Punkte!
                            </div>
                        ` : `
                            <div style="text-align: center; color: #666; margin: 1rem 0;">
                                Die richtige Antwort war: <strong>${question.correctAnswer}</strong>
                            </div>
                            <div style="text-align: center; font-size: 1.5rem; color: #ef4444; margin: 1rem 0;">
                                -1 Leben ❤️
                            </div>
                        `}

                        <div class="fact-box">
                            <p><strong>💡 Wusstest du?</strong></p>
                            <p style="margin-top: 0.5rem;">${question.fact}</p>
                        </div>

                        ${gameState.currentStep < product.questions.length - 1 ? `
                            <button onclick="nextQuestion()" class="action-button" style="width: 100%; margin-top: 1rem;">
                                Nächste Frage →
                            </button>
                        ` : `
                            <button onclick="finishProduct()" class="action-button" style="width: 100%; margin-top: 1rem;">
                                Reise anzeigen 🗺️
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function renderSummary() {
            const product = products[gameState.currentProduct];
            
            return `
                <header>
                    <h1>🗺️ Die Reise deines ${product.icon} ${product.name}</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">← Zurück zum Menü</a>
                </header>

                <main class="slide-in">
                    <div class="card">
                        <h2>Die komplette Reise:</h2>
                        <p style="color: #666; margin-bottom: 1.5rem;">
                            Dein ${product.name} hat eine erstaunliche Weltreise hinter sich. Hier siehst du alle Stationen:
                        </p>

                        <div class="journey-steps">
                            ${product.journey.map((stop, index) => `
                                <div class="journey-step">
                                    <div class="journey-icon">${stop.flag}</div>
                                    <div class="journey-content">
                                        <div class="journey-location">
                                            Schritt ${stop.step}: ${stop.location}
                                        </div>
                                        <div class="journey-description">
                                            ${stop.description}
                                        </div>
                                    </div>
                                    ${index < product.journey.length - 1 ? `
                                        <div style="font-size: 1.5rem; color: #10b981;">→</div>
                                    ` : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">📊 Zusammenfassung</h3>
                        <div style="font-size: 1.5rem; color: #1e3a8a; margin: 1rem 0;">
                            <strong>${product.totalDistance}</strong> zurückgelegt
                        </div>
                        <div style="font-size: 1.2rem; color: #1e40af;">
                            Über <strong>${product.journey.length}</strong> verschiedene Stationen
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button onclick="showFinalResult()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            Weiter zur Auswertung →
                        </button>
                    </div>
                </main>
            `;
        }

        function renderFinal() {
            const product = products[gameState.currentProduct];
            const totalQuestions = product.questions.length;
            const percentage = Math.round((gameState.correctInRound / totalQuestions) * 100);
            
            return `
                <header>
                    <h1>🏆 ${product.icon} ${product.name} abgeschlossen!</h1>
                    <a href="#" onclick="backToMenu(); return false;" class="back-link">← Zurück zum Menü</a>
                </header>

                <main class="slide-in">
                    <div class="card celebration">
                        <div style="text-align: center; font-size: 5rem; margin-bottom: 1.5rem;">🎉</div>
                        
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">Punkte</div>
                                <div class="info-value">${gameState.score}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Richtig</div>
                                <div class="info-value">${gameState.correctInRound}/${totalQuestions}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Genauigkeit</div>
                                <div class="info-value">${percentage}%</div>
                            </div>
                        </div>

                        <div style="margin-top: 1.5rem; text-align: center;">
                            <div style="font-size: 1.2rem; color: #1e3a8a;">
                                Gesamte Distanz: <strong>${product.totalDistance}</strong>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="background: linear-gradient(135deg, #fef3c7, #fde68a);">
                        <h3 style="color: #92400e; margin-bottom: 1rem;">✨ Interessanter Fakt</h3>
                        <p style="color: #78350f; font-size: 1.1rem;">${product.funFact}</p>
                    </div>

                    ${percentage === 100 ? `
                        <div class="card" style="background: linear-gradient(135deg, #d1fae5, #a7f3d0); text-align: center;">
                            <h3 style="color: #047857; font-size: 2rem; margin-bottom: 0.5rem;">🌟 Perfekt!</h3>
                            <p style="color: #065f46;">Du bist ein Globalisierungs-Experte!</p>
                        </div>
                    ` : percentage >= 66 ? `
                        <div class="card" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); text-align: center;">
                            <h3 style="color: #1e40af; font-size: 2rem; margin-bottom: 0.5rem;">👏 Super!</h3>
                            <p style="color: #1e3a8a;">Sehr gut! Du kennst dich schon gut aus!</p>
                        </div>
                    ` : `
                        <div class="card" style="background: linear-gradient(135deg, #e9d5ff, #d8b4fe); text-align: center;">
                            <h3 style="color: #7c3aed; font-size: 2rem; margin-bottom: 0.5rem;">💪 Weiter so!</h3>
                            <p style="color: #6b21a8;">Guter Start! Probiere weitere Produkte aus!</p>
                        </div>
                    `}

                    <div style="text-align: center;">
                        <button onclick="backToMenu()" class="action-button" style="font-size: 1.2rem; padding: 1.25rem 2.5rem;">
                            Nächstes Produkt erkunden 🚀
                        </button>
                    </div>
                </main>
            `;
        }

        function startProduct(productKey) {
            gameState.currentProduct = productKey;
            gameState.currentStep = 0;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            gameState.correctInRound = 0;
            
            // Shuffle options for each question
            const product = products[productKey];
            gameState.shuffledOptions = product.questions.map(q => shuffleArray(q.options));
            
            render();
        }

        function selectAnswer(answer) {
            const product = products[gameState.currentProduct];
            const question = product.questions[gameState.currentStep];
            const isCorrect = answer === question.correctAnswer;
            
            if (isCorrect) {
                gameState.score += gameState.usedHint ? 75 : 100;
                gameState.correctInRound++;
            } else {
                gameState.lives--;
                if (gameState.lives <= 0) {
                    alert('Game Over! 😢 Du hast keine Leben mehr.\n\nDein finaler Score: ' + gameState.score + ' Punkte');
                    resetGame();
                    return;
                }
            }
            
            gameState.gameMode = 'result';
            gameState.lastAnswerCorrect = isCorrect;
            render();
        }

        function showHint() {
            gameState.showHint = true;
            gameState.usedHint = true;
            render();
        }

        function nextQuestion() {
            gameState.currentStep++;
            gameState.gameMode = 'playing';
            gameState.showHint = false;
            gameState.usedHint = false;
            render();
        }

        function finishProduct() {
            gameState.gameMode = 'summary';
            render();
        }

        function showFinalResult() {
            gameState.gameMode = 'final';
            render();
        }

        function backToMenu() {
            gameState.gameMode = 'menu';
            gameState.currentProduct = null;
            render();
        }

        function resetGame() {
            gameState = {
                currentProduct: null,
                currentStep: 0,
                score: 0,
                lives: 3,
                correctInRound: 0,
                gameMode: 'menu',
                showHint: false,
                usedHint: false,
                shuffledOptions: []
            };
            render();
        }

        function render() {
            const app = document.getElementById('app');
            
            if (gameState.gameMode === 'menu') {
                app.innerHTML = renderMenu();
            } else if (gameState.gameMode === 'playing') {
                app.innerHTML = renderGame();
            } else if (gameState.gameMode === 'result') {
                const gameHTML = renderGame();
                const resultHTML = renderResult(gameState.lastAnswerCorrect);
                app.innerHTML = gameHTML + resultHTML;
            } else if (gameState.gameMode === 'summary') {
                app.innerHTML = renderSummary();
            } else if (gameState.gameMode === 'final') {
                app.innerHTML = renderFinal();
            }
            
            // Nach jedem Render: Twemoji auf alle Emojis anwenden
            if (typeof twemoji !== 'undefined') {
                twemoji.parse(document.body, {
                    folder: 'svg',
                    ext: '.svg'
                });
            }
        }

        // Initial render
        render();
    </script>
</body>
</html>
